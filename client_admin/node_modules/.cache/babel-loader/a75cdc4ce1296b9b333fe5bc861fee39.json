{"remainingRequest":"/Users/tom/Desktop/CS763460_20220314091634/client_admin/node_modules/babel-loader/lib/index.js!/Users/tom/Desktop/CS763460_20220314091634/client_admin/src/plugins/jquery_expand.js","dependencies":[{"path":"/Users/tom/Desktop/CS763460_20220314091634/client_admin/src/plugins/jquery_expand.js","mtime":1649294744000},{"path":"/Users/tom/Desktop/CS763460_20220314091634/client_admin/node_modules/cache-loader/dist/cjs.js","mtime":1652753645010},{"path":"/Users/tom/Desktop/CS763460_20220314091634/client_admin/node_modules/babel-loader/lib/index.js","mtime":1652753645271}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktbmFtZXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIpOwoKdmFyIF90eXBlb2YgPSByZXF1aXJlKCIvVXNlcnMvdG9tL0Rlc2t0b3AvQ1M3NjM0NjBfMjAyMjAzMTQwOTE2MzQvY2xpZW50X2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZiIpOwoKLyoqCiAqIEBmaWxlT3ZlcnZpZXcgSmF2YVNjcmlwdOaLk+WxleWHveaVsAogKiBAYXV0aG9yIHh4eAogKiBAdmVyc2lvbiAxLjIKICovCgovKiA9PSDln7rnoYDlh73mlbAgPT0gKi8KCi8qKgogKiBAZGVzY3JpcHRpb24g5bu26L+f5omn6KGM77yI5LyR55yg77yJCiAqIEBwYXJhbSB7TnVtYmVyfSBtaWxsaVNlY29uZHMg5q+r56eSCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmog5Yik5pat5a+56LGh5oiW5Ye95pWwCiAqIEBwYXJhbSB7U3RyaW5nfSBrZXkg5Yik5pat55qE5a+56LGh5bGe5oCnLCDkuLrlrZjlnKjnmoTmg4XlhrXkuIvmj5DmiJDpgIDlh7rlvqrnjq8KICogQGV4YW1wbGUgdmFyIG9iaiA9IHtvazogZmFsc2V9OyBzbGVlcCgyMDAwLCBvYmosICdvaycpOwogKiBAZXhhbXBsZSBzbGVlcCgyMDAwKTsKICovCmZ1bmN0aW9uIHNsZWVwKG1pbGxpU2Vjb25kcywgb2JqLCBrZXkpIHsKICB2YXIgZW5kVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgbWlsbGlTZWNvbmRzOwoKICBpZiAob2JqKSB7CiAgICBpZiAoa2V5KSB7CiAgICAgIHdoaWxlIChuZXcgRGF0ZSgpLmdldFRpbWUoKSA8IGVuZFRpbWUpIHsKICAgICAgICBpZiAob2JqW2tleV0pIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdmFyIGZ1bmMgPSBvYmo7CgogICAgICB3aGlsZSAobmV3IERhdGUoKS5nZXRUaW1lKCkgPCBlbmRUaW1lKSB7CiAgICAgICAgaWYgKCFmdW5jKCkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICB3aGlsZSAobmV3IERhdGUoKS5nZXRUaW1lKCkgPCBlbmRUaW1lKSB7fQogIH0KfQovKioKICogQGRlc2NyaXB0aW9uIOWIpOaWreWvueixoeaYr+WQpuebuOS8vAogKiBAcGFyYW0ge09iamVjdH0gb2JqIOiiq+WIpOaWreWvueixoQogKiBAcGFyYW0ge09iamVjdH0gcXVlcnkg55So5L2c5Yik5pat55qE5a+56LGhCiAqIEBwYXJhbSB7Qm9vbGVhbn0gYWxsIOaYr+WQpuWujOWFqOebuOWQjAogKiBAcmV0dXJuIHtCb29sZWFufSDnm7jkvLzov5Tlm550cnVl77yM5ZCm5YiZ6L+U5ZueZmFsc2UKICovCgoKZnVuY3Rpb24gYXMob2JqLCBxdWVyeSwgYWxsKSB7CiAgaWYgKG9iaikgewogICAgdmFyIGJsID0gdHJ1ZTsKCiAgICB2YXIgdHlwZSA9IF90eXBlb2Yob2JqKTsKCiAgICBpZiAodHlwZSAhPT0gX3R5cGVvZihxdWVyeSkpIHsKICAgICAgLy8g5aaC5p6c57G75Z6L5LiN5LiA6Ie0IOWImeS4pOS4quaXoOebuOS8vAogICAgICBibCA9IGZhbHNlOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlID09PSAnYm9vbCcgfHwgdHlwZSA9PT0gJ251bWJlcicpIHsKICAgICAgYmwgPSBvYmogPT09IHF1ZXJ5OwogICAgfSBlbHNlIGlmIChvYmouY29uc3RydWN0b3IgPT0gQXJyYXkpIHsKICAgICAgLy8g5aaC5p6c6YO95piv5pWw57uECiAgICAgIHZhciBsaCA9IG9iai5sZW5ndGg7CgogICAgICBpZiAoYWxsICYmIGxoICE9PSBxdWVyeS5sZW5ndGgpIHsKICAgICAgICAvLyDopoHmsYLlrozlhajkuIDoh7Qg6ICM6ZW/5bqm5LiN5LiA6Ie0IOivtOaYjuS4jeebuOS8vAogICAgICAgIGJsID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5ZCm5YiZ5Yik5pat5pWw57uE6YeM55qE5q+P5Liq5oiQ5ZGY5piv5ZCm55u45Ly8CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaDsgaSsrKSB7CiAgICAgICAgICBpZiAoIWFzKG9ialtpXSwgcXVlcnlbaV0pKSB7CiAgICAgICAgICAgIGJsID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8g5aaC5p6c57G75Z6L5Li65a+56LGhCiAgICAgIGlmIChhbGwgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5sZW5ndGggIT09IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHF1ZXJ5KS5sZW5ndGgpIHsKICAgICAgICAvLyDlpoLmnpzopoHmsYLlrozlhajkuIDoh7QsIOiAjOWxnuaAp+mVv+W6puS4jeS4gOiHtO+8jOWImeS4jeebuOS8vAogICAgICAgIGJsID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5ZCm5YiZ6YO95Li65a+56LGh5YiZ5Yik5pat5YW25YC85piv5ZCm5LiA6Ie0CiAgICAgICAgZm9yICh2YXIgayBpbiBxdWVyeSkgewogICAgICAgICAgaWYgKCFhcyhvYmpba10sIHF1ZXJ5W2tdLCBhbGwpKSB7CiAgICAgICAgICAgIGJsID0gZmFsc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiBibDsKICB9IGVsc2UgewogICAgcmV0dXJuIGZhbHNlOwogIH0KfQovKioKICogQGRlc2NyaXB0aW9uIOa1i+ivleWHveaVsOaJp+ihjOmAn+W6pgogKiBAcGFyYW0ge0Z1bmN0aW9uKCl9IGZ1bmMg5rWL6K+V55qE5Ye95pWwCiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lcyA9IFt2YWx1ZV0g5rWL6K+V5qyh5pWwCiAqLwoKCmZ1bmN0aW9uIHNwZWVkcyhmdW5jLCB0aW1lcykgewogIGlmICghdGltZXMpIHsKICAgIHRpbWVzID0gMTAwMDAwMDsKICB9CgogIHZhciB0MSA9IG5ldyBEYXRlKCkudmFsdWVPZigpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbWVzOyBpKyspIHsKICAgIGZ1bmMoKTsKICB9CgogIHZhciB0MiA9IG5ldyBEYXRlKCkudmFsdWVPZigpOwogIHZhciBzID0gdDIgLSB0MTsKICBjb25zb2xlLmxvZygn6ICX5pe2JyArIHMgKyAn5q+r56eSLCDlubPlnYcnICsgcyAvIHRpbWVzICsgJ21zL+asoScpOwp9Ci8qKgogKiBAZGVzY3JpcHRpb24g5re75Yqg5a+56LGh5bGe5oCnCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpBIOiiq+a3u+WKoOeahOWvueixoQogKiBAcGFyYW0ge09iamVjdH0gb2JqQiDnlKjkvZzmt7vliqDnmoTlr7nosaEKICogQHBhcmFtIHtCb29sZWFufSBibCDmmK/lkKbooaXlhYXmsqHmnInnmoTlr7nosaEKICogQHJldHVybiB7T2JqZWN0fSDmlrDlr7nosaEKICovCgoKZnVuY3Rpb24gcHVzaChvYmpBLCBvYmpCLCBibCkgewogIGlmICghb2JqQSB8fCAhb2JqQikgewogICAgcmV0dXJuOwogIH0KCiAgaWYgKGJsKSB7CiAgICBmb3IgKHZhciBrIGluIG9iakIpIHsKICAgICAgdmFyIHZhbHVlID0gb2JqQltrXTsKCiAgICAgIGlmIChvYmpBW2tdID09PSB1bmRlZmluZWQgfHwgb2JqQVtrXSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gbnVsbCkgewogICAgICAgIG9iakFba10gPSB2YWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdHlwZSA9IF90eXBlb2Yob2JqQVtrXSk7CgogICAgICAgIHZhciBwID0gX3R5cGVvZih2YWx1ZSk7CgogICAgICAgIGlmICh0eXBlICE9PSBwKSB7CiAgICAgICAgICBpZiAodHlwZSA9PT0gIm51bWJlciIpIHsKICAgICAgICAgICAgdmFyIG4gPSBOdW1iZXIodmFsdWUpOwoKICAgICAgICAgICAgaWYgKG4gPT09IE5hTikgewogICAgICAgICAgICAgIG4gPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBvYmpBW2tdID0gbjsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gImJvb2xlYW4iKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJzAnIHx8IHZhbHVlID09PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnRmFsc2UnKSB7CiAgICAgICAgICAgICAgb2JqQVtrXSA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG9iakFba10gPSBCb29sZWFuKHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAic3RyaW5nIikgewogICAgICAgICAgICBvYmpBW2tdID0gdmFsdWUudG9TdHJpbmcoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9iakFba10gPSB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJvYmplY3QiKSB7CiAgICAgICAgICBpZiAob2JqQVtrXS5jb25zdHJ1Y3RvciA9PSBBcnJheSAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PSBBcnJheSkgewogICAgICAgICAgICBvYmpBW2tdLmNsZWFyKCk7CiAgICAgICAgICAgIG9iakFba10uYWRkTGlzdCh2YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwdXNoKG9iakFba10sIHZhbHVlLCBibCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9iakFba10gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgZm9yICh2YXIgayBpbiBvYmpBKSB7CiAgICAgIHZhciB2YWx1ZSA9IG9iakJba107CgogICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiBvYmpBW2tdICE9PSBudWxsICYmIHZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgdmFyIHR5cGUgPSBfdHlwZW9mKG9iakFba10pOwoKICAgICAgICB2YXIgcCA9IF90eXBlb2YodmFsdWUpOwoKICAgICAgICBpZiAodHlwZSAhPT0gcCkgewogICAgICAgICAgaWYgKHR5cGUgPT09ICJudW1iZXIiKSB7CiAgICAgICAgICAgIHZhciBuID0gTnVtYmVyKHZhbHVlKTsKCiAgICAgICAgICAgIGlmIChuID09PSBOYU4pIHsKICAgICAgICAgICAgICBuID0gMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb2JqQVtrXSA9IG47CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJib29sZWFuIikgewogICAgICAgICAgICBpZiAodmFsdWUgPT09ICcwJyB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJyB8fCB2YWx1ZSA9PT0gJ0ZhbHNlJykgewogICAgICAgICAgICAgIG9iakFba10gPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBvYmpBW2tdID0gQm9vbGVhbih2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgb2JqQVtrXSA9IHZhbHVlLnRvU3RyaW5nKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvYmpBW2tdID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAib2JqZWN0IikgewogICAgICAgICAgaWYgKG9iakFba10uY29uc3RydWN0b3IgPT0gQXJyYXkgJiYgdmFsdWUuY29uc3RydWN0b3IgPT0gQXJyYXkpIHsKICAgICAgICAgICAgb2JqQVtrXS5jbGVhcigpOwogICAgICAgICAgICBvYmpBW2tdLmFkZExpc3QodmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHVzaChvYmpBW2tdLCB2YWx1ZSwgYmwpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvYmpBW2tdID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gb2JqQTsKfQovKioKICogQGRlc2NyaXB0aW9uIOa4heepuuWvueixoeWAvAogKiBAcGFyYW0ge09iamVjdH0gb2JqIOWvueixoQogKiBAcmV0dXJuIHtPYmplY3R9IOi/lOWbnuWvueixoeiHqui6qwogKi8KCgpmdW5jdGlvbiBjbGVhcihvYmopIHsKICBpZiAob2JqKSB7CiAgICBmb3IgKHZhciBrIGluIG9iaikgewogICAgICB2YXIgdmFsID0gb2JqW2tdOwoKICAgICAgaWYgKHZhbCkgewogICAgICAgIHZhciBuYW1lID0gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsKTsKCiAgICAgICAgc3dpdGNoIChuYW1lKSB7CiAgICAgICAgICBjYXNlICJzdHJpbmciOgogICAgICAgICAgICBvYmpba10gPSAiIjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAibnVtYmVyIjoKICAgICAgICAgICAgb2JqW2tdID0gMDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAiYXJyYXkiOgogICAgICAgICAgICBvYmpba10uY2xlYXIoKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAib2JqZWN0IjoKICAgICAgICAgICAgY2xlYXIob2JqW2tdKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAiZnVuY3Rpb24iOgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJzeW1ib2wiOgogICAgICAgICAgICBvYmpba10gPSAiIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gb2JqOwp9Ci8qKgogKiBAZGVzY3JpcHRpb24g6L2s5Li6anNvbuWtl+espuS4sgogKiBAcGFyYW0ge09iamVjdH0gb2JqIOiiq+i9rOaNoueahOWvueixoQogKiBAcGFyYW0ge0Jvb2xlYW59IGZvcm1hdCDmmK/lkKbmoLzlvI/ljJYKICogQHJldHVybiB7U3RyaW5nfSBqc29u5qC85byP5a2X56ym5LiyCiAqLwoKCmZ1bmN0aW9uIHRvSnNvbihvYmosIGZvcm1hdCkgewogIGlmIChmb3JtYXQpIHsKICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDQpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTsKICB9Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbiDovax1cmzlrZfnrKbkuLIKICogQHBhcmFtIHtPYmplY3R9IG9iaiDooqvovazmjaLnmoTlr7nosaEKICogQHBhcmFtIHtTdHJpbmd9IHVybCDor7fmsYLlnLDlnYAKICogQHJldHVybiB7U3RyaW5nfSB1cmzlj4LmlbDmoLzlvI/lrZfnrKbkuLIKICovCgoKZnVuY3Rpb24gdG9Vcmwob2JqLCB1cmwpIHsKICB2YXIgcXVlcnlTdHIgPSAiIjsKCiAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgdmFyIHZhbHVlID0gb2JqW2tleV07CgogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgIHF1ZXJ5U3RyICs9ICImIiArIGtleSArICI9IiArIG9ialtrZXldOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHZhbHVlKSB7CiAgICAgIHF1ZXJ5U3RyICs9ICImIiArIGtleSArICI9IiArIGVuY29kZVVSSSh2YWx1ZSk7CiAgICB9CiAgfQoKICBpZiAodXJsKSB7CiAgICBpZiAodXJsLmVuZFdpdGgoJz8nKSB8fCB1cmwuZW5kV2l0aCgnJicpKSB7CiAgICAgIHJldHVybiB1cmwgKyBxdWVyeVN0ci5yZXBsYWNlKCcmJywgJycpOwogICAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZignPycpID09PSAtMSkgewogICAgICByZXR1cm4gdXJsICsgcXVlcnlTdHIucmVwbGFjZSgnJicsICc/Jyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdXJsICsgcXVlcnlTdHI7CiAgICB9CiAgfSBlbHNlIHsKICAgIHJldHVybiBxdWVyeVN0ci5yZXBsYWNlKCcmJywgJycpOwogIH0KfQoKOwovKioKICogQGRlc2NyaXB0aW9uIOaLt+i0neWvueixoQogKiBAcGFyYW0ge09iamVjdH0gb2JqIOiiq+aLt+i0neeahOWvueixoQogKiBAcGFyYW0ge0Jvb2xlYW59IGhhcyDmmK/lkKbpnZ7nqbrmi7fotJ3vvIzlpoLmnpzlkKvmnInmlbDmja7miY3mi7fotJ3vvIzkuI3lkKvmlbDmja7kuI3mi7fotJ0KICogQHJldHVybiB7T2JqZWN0fSDmlrDlr7nosaEKICovCgpmdW5jdGlvbiBjb3B5KG9iaiwgaGFzKSB7CiAgdmFyIG5ld09iaiA9IHt9OwoKICBpZiAoaGFzKSB7CiAgICBmb3IgKHZhciBhdHRyIGluIG9iaikgewogICAgICB2YXIgbyA9IG9ialthdHRyXTsKCiAgICAgIGlmIChvKSB7CiAgICAgICAgbmV3T2JqW2F0dHJdID0gbzsKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICBmb3IgKHZhciBhdHRyIGluIG9iaikgewogICAgICBuZXdPYmpbYXR0cl0gPSBvYmpbYXR0cl07CiAgICB9CiAgfQoKICByZXR1cm4gbmV3T2JqOwp9Cgo7Ci8qKgogKiBAZGVzY3JpcHRpb24g5p+l55yL5omA5pyJ5bGe5oCnCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmog5p+l55yL55qE5a+56LGhCiAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlIOS/neWtmOS9jee9rgogKi8KCmZ1bmN0aW9uIGtleXMob2JqLCBmaWxlKSB7CiAgdmFyIHRleHQgPSAiIjsKCiAgZm9yICh2YXIgayBpbiBvYmopIHsKICAgIHRleHQgKz0gayArICdcclxuJzsKICB9CgogIGNvbnNvbGUubG9nKHRleHQpOwp9Ci8qKgogKiBAZGVzY3JpcHRpb24g5Yig6Zmk5a+56LGh56m65bGe5oCnCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmog5a+56LGhCiAqIEBwYXJhbSB7T2JqZWN0fSBpbmNsdWRlWmVybyDmmK/lkKbljIXmi6wwCiAqIEByZXR1cm4ge09iamVjdH0g6L+U5Zue5paw5a+56LGhCiAqLwoKCmZ1bmN0aW9uIGRlbGV0ZV9wcm9wKG9iaiwgaW5jbHVkZVplcm8pIHsKICB2YXIgbyA9IE9iamVjdC5hc3NpZ24oe30sIG9iaik7CgogIGlmIChpbmNsdWRlWmVybykgewogICAgZm9yICh2YXIgayBpbiBvKSB7CiAgICAgIHZhciB2ID0gb1trXTsKCiAgICAgIGlmICghdikgewogICAgICAgIGRlbGV0ZSBvW2tdOwogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIGZvciAodmFyIGsgaW4gbykgewogICAgICB2YXIgdiA9IG9ba107CgogICAgICBpZiAodiA9PT0gJycgfHwgdiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQpIHsKICAgICAgICBkZWxldGUgb1trXTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIG87Cn0KLyoqCiAqIEBuYW1lc3BhY2UKICogQHByb3BlcnR5IHtPYmplY3R9IHBvb2wg5pWw5o2u6L+e5o6l5rGgLCDnlKjkuo7lrZjlgqjmnInlhbPmlbDmja7lupPnmoTmk43kvZznsbsKICogQHByb3BlcnR5IHtPYmplY3R9IHRhc2sg5Lu75Yqh5rGgLCDnlKjkuo7lrZjlgqjlrprml7bku7vliqHmk43kvZznsbsKICogQHByb3BlcnR5IHtPYmplY3R9IGFwaSBBUEnmjqXlj6PvvIznlKjkuo7lrZjlgqjmnInlhbPmjqXlj6PnmoTmk43kvZznsbsKICogQHByb3BlcnR5IHtPYmplY3R9IHZhbCDlhajlsYDlj5jph4/vvIznlKjkuo7lrZjlgqjlhajlsYDnmoTphY3nva4KICogQHByb3BlcnR5IHtPYmplY3R9IGRpY3Qg5a2X5YW477yM55So5LqO5p+l6K+i5Y+Y6YeP5pu/5o2i5ZCNCiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBsYW5nIOivreiogOWMhSwg55So5LqO5YWo5bGA55qE6K+t6KiA5pu/5o2iCiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBzbGVlcCDlu7bov58o5LyR55ygKQogKiBAcHJvcGVydHkge0Z1bmN0aW9uKCl9IHNwZWVkIOa1i+ivleaJp+ihjOmAn+W6puWHveaVsAogKiBAcHJvcGVydHkge0Z1bmN0aW9uKE9iamVjdCwgT2JqZWN0LCBCb29sZWFuKTpCb29sZWFufSBhcyDliKTmlq3lr7nosaHmmK/lkKbnm7jkvLwKICogQHByb3BlcnR5IHtGdW5jdGlvbihPYmplY3QsIE9iamVjdCk6Qm9vbGVhbn0gcHVzaCDkuLrlr7nosaHmt7vliqDlsZ7mgKcKICogQHByb3BlcnR5IHtGdW5jdGlvbihPYmplY3QpOlN0cmluZ30gdG9Kc29uIOWvueixoei9rGpzb27lrZfnrKbkuLIKICogQHByb3BlcnR5IHtGdW5jdGlvbihPYmplY3QpOlN0cmluZ30gdG9Vcmwg5a+56LGh6L2sdXJs5a2X56ym5LiyCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb24oT2JqZWN0KTpPYmplY3R9IGNvcHkg5aSN5Yi25LiA5Liq5paw5a+56LGhCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb24oT2JqZWN0KTpTdHJpbmd9IGtleXMg5p+l6K+i6I635Y+W5a+56LGh5bGe5oCn6ZSuCiAqLwoKCnZhciBmdW5jcyA9IHsKICAvLyDmlbDmja7ov57mjqXmsaAsIOeUqOS6juWtmOWCqOacieWFs+aVsOaNruW6k+eahOaTjeS9nOexuwogIHBvb2w6IHt9LAogIC8vIOS7u+WKoeaxoCwg55So5LqO5a2Y5YKo5a6a5pe25Lu75Yqh5pON5L2c57G7CiAgdGFzazoge30sCiAgLy8gQVBJ5o6l5Y+j77yM55So5LqO5a2Y5YKo5pyJ5YWz5o6l5Y+j55qE5pON5L2c57G7CiAgYXBpOiB7fSwKICAvLyDlhajlsYDlj5jph4/vvIznlKjkuo7lrZjlgqjlhajlsYDnmoTphY3nva4KICB2YWw6IHsKICAgIC8vIOm7mOiupOS9nOeUqOWfnywgc3lz6KGo56S657O757ufCiAgICBzY29wZTogInN5cyIKICB9LAoKICAvKioKICAgKiBAZGVzY3JpcHRpb24g5a2X5YW477yM55So5LqO5p+l6K+i5Y+Y6YeP5pu/5o2i5ZCNCiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHNlc3Npb25faWQgc2Vzc2lvbueahElECiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHVzZXJfaWQg55So5oi355qESUTvvIznlKjkuo7mlbDmja7lupPml7bmn6Xor6LnlKjmiLfllK/kuIDmoIfor4YKICAgKi8KICBkaWN0OiB7CiAgICBzZXNzaW9uX2lkOiAibW06dXVpZCIsCiAgICB1c2VyX2lkOiAidXNlcl9pZCIsCiAgICB0b2tlbjogIngtYXV0aC10b2tlbiIKICB9LAoKICAvKioKICAgKiBAZGVzY3JpcHRpb24g6K+t6KiA5YyFLCDnlKjkuo7lhajlsYDnmoTor63oqIDmm7/mjaIKICAgKiBAcHJvcGVydHkge1N0cmluZ30gbm93ID0gW2NoaW5lc2V8ZW5nbGlzaF0g5b2T5YmN6K+t6KiACiAgICogQHByb3BlcnR5IHtPYmplY3R9IGNoaW5lc2Ug5Lit5paH6K+t6KiA5YyFCiAgICogQHByb3BlcnR5IHtPYmplY3R9IGVuZ2xpc2gg6Iux5paH6K+t6KiA5YyFCiAgICovCiAgbGFuZzogewogICAgbm93OiAiY2hpbmVzZSIsCiAgICBjaGluZXNlOiB7fSwKICAgIGVuZ2xpc2g6IHt9CiAgfSwKICAvLyDlu7bov58KICBzbGVlcDogc2xlZXAsCiAgLy8g5rWL6K+V5omn6KGM6YCf5bqm5Ye95pWwCiAgc3BlZWRzOiBzcGVlZHMsCiAgLy8g5Yik5pat5a+56LGh5piv5ZCm55u45Ly8CiAgYXM6IGFzLAogIC8vIOa3u+WKoOWvueixoQogIHB1c2g6IHB1c2gsCiAgLy8g5riF56m65a+56LGh5YC8CiAgY2xlYXI6IGNsZWFyLAogIC8vIOWvueixoei9rGpzb27lrZfnrKbkuLIKICB0b0pzb246IHRvSnNvbiwKICAvLyDlr7nosaHovax1cmzlrZfnrKbkuLIKICB0b1VybDogdG9VcmwsCiAgLy8g5aSN5Yi25LiA5Liq5paw5a+56LGhCiAgY29weTogY29weSwKICAvLyDmn6Xor6Lojrflj5blr7nosaHlsZ7mgKfplK4KICBrZXlzOiBrZXlzLAogIC8vIOWIoOmZpOWvueixoeWxnuaApwogIGRlbGV0ZTogZGVsZXRlX3Byb3AKfTsKCmlmICh0eXBlb2YgJCA9PT0gInVuZGVmaW5lZCIpIHsKICB3aW5kb3cuJCA9IGZ1bmNzOwp9IGVsc2UgewogIHB1c2goJCwgZnVuY3MsIHRydWUpOwp9Ci8qIE1ENeWKoOWvhuexuyAqLwoKCihmdW5jdGlvbiAoKSB7CiAgLyogbWQ15Yqg5a+G77yI5byA5aeL77yJICovCiAgdmFyIGhleGNhc2UgPSAwOwogIC8qIGhleCBvdXRwdXQgZm9ybWF0LiAwIC0gbG93ZXJjYXNlOyAxIC0gdXBwZXJjYXNlICAqLwoKICB2YXIgYjY0cGFkID0gIiI7CiAgLyogYmFzZS02NCBwYWQgY2hhcmFjdGVyLiAiPSIgZm9yIHN0cmljdCBSRkMgY29tcGxpYW5jZSAqLwoKICB2YXIgY2hyc3ogPSA4OwogIC8qIGJpdHMgcGVyIGlucHV0IGNoYXJhY3Rlci4gOCAtIEFTQ0lJOyAxNiAtIFVuaWNvZGUgICovCgogIC8qCiAgICogUGVyZm9ybSBhIHNpbXBsZSBzZWxmLXRlc3QgdG8gc2VlIGlmIHRoZSBWTSBpcyB3b3JraW5nCiAgICovCgogIGZ1bmN0aW9uIG1kNV92bV90ZXN0KCkgewogICAgcmV0dXJuIGhleF9tZDUoImFiYyIpID09ICI5MDAxNTA5ODNjZDI0ZmIwZDY5NjNmN2QyOGUxN2Y3MiI7CiAgfQogIC8qCiAgICogQ2FsY3VsYXRlIHRoZSBNRDUgb2YgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aAogICAqLwoKCiAgZnVuY3Rpb24gY29yZV9tZDUoeCwgbGVuKSB7CiAgICAvKiBhcHBlbmQgcGFkZGluZyAqLwogICAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCBsZW4gJSAzMjsKICAgIHhbKGxlbiArIDY0ID4+PiA5IDw8IDQpICsgMTRdID0gbGVuOwogICAgdmFyIGEgPSAxNzMyNTg0MTkzOwogICAgdmFyIGIgPSAtMjcxNzMzODc5OwogICAgdmFyIGMgPSAtMTczMjU4NDE5NDsKICAgIHZhciBkID0gMjcxNzMzODc4OwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMTYpIHsKICAgICAgdmFyIG9sZGEgPSBhOwogICAgICB2YXIgb2xkYiA9IGI7CiAgICAgIHZhciBvbGRjID0gYzsKICAgICAgdmFyIG9sZGQgPSBkOwogICAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSArIDBdLCA3LCAtNjgwODc2OTM2KTsKICAgICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2kgKyAxXSwgMTIsIC0zODk1NjQ1ODYpOwogICAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNywgNjA2MTA1ODE5KTsKICAgICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2kgKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTsKICAgICAgYSA9IG1kNV9mZihhLCBiLCBjLCBkLCB4W2kgKyA0XSwgNywgLTE3NjQxODg5Nyk7CiAgICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpICsgNV0sIDEyLCAxMjAwMDgwNDI2KTsKICAgICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTcsIC0xNDczMjMxMzQxKTsKICAgICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2kgKyA3XSwgMjIsIC00NTcwNTk4Myk7CiAgICAgIGEgPSBtZDVfZmYoYSwgYiwgYywgZCwgeFtpICsgOF0sIDcsIDE3NzAwMzU0MTYpOwogICAgICBkID0gbWQ1X2ZmKGQsIGEsIGIsIGMsIHhbaSArIDldLCAxMiwgLTE5NTg0MTQ0MTcpOwogICAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSArIDEwXSwgMTcsIC00MjA2Myk7CiAgICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpICsgMTFdLCAyMiwgLTE5OTA0MDQxNjIpOwogICAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNywgMTgwNDYwMzY4Mik7CiAgICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpICsgMTNdLCAxMiwgLTQwMzQxMTAxKTsKICAgICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2kgKyAxNF0sIDE3LCAtMTUwMjAwMjI5MCk7CiAgICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpICsgMTVdLCAyMiwgMTIzNjUzNTMyOSk7CiAgICAgIGEgPSBtZDVfZ2coYSwgYiwgYywgZCwgeFtpICsgMV0sIDUsIC0xNjU3OTY1MTApOwogICAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSArIDZdLCA5LCAtMTA2OTUwMTYzMik7CiAgICAgIGMgPSBtZDVfZ2coYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKTsKICAgICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2kgKyAwXSwgMjAsIC0zNzM4OTczMDIpOwogICAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSArIDVdLCA1LCAtNzAxNTU4NjkxKTsKICAgICAgZCA9IG1kNV9nZyhkLCBhLCBiLCBjLCB4W2kgKyAxMF0sIDksIDM4MDE2MDgzKTsKICAgICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE0LCAtNjYwNDc4MzM1KTsKICAgICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2kgKyA0XSwgMjAsIC00MDU1Mzc4NDgpOwogICAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSArIDldLCA1LCA1Njg0NDY0MzgpOwogICAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSArIDE0XSwgOSwgLTEwMTk4MDM2OTApOwogICAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSArIDNdLCAxNCwgLTE4NzM2Mzk2MSk7CiAgICAgIGIgPSBtZDVfZ2coYiwgYywgZCwgYSwgeFtpICsgOF0sIDIwLCAxMTYzNTMxNTAxKTsKICAgICAgYSA9IG1kNV9nZyhhLCBiLCBjLCBkLCB4W2kgKyAxM10sIDUsIC0xNDQ0NjgxNDY3KTsKICAgICAgZCA9IG1kNV9nZyhkLCBhLCBiLCBjLCB4W2kgKyAyXSwgOSwgLTUxNDAzNzg0KTsKICAgICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTQsIDE3MzUzMjg0NzMpOwogICAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSArIDEyXSwgMjAsIC0xOTI2NjA3NzM0KTsKICAgICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2kgKyA1XSwgNCwgLTM3ODU1OCk7CiAgICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpICsgOF0sIDExLCAtMjAyMjU3NDQ2Myk7CiAgICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNiwgMTgzOTAzMDU2Mik7CiAgICAgIGIgPSBtZDVfaGgoYiwgYywgZCwgYSwgeFtpICsgMTRdLCAyMywgLTM1MzA5NTU2KTsKICAgICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2kgKyAxXSwgNCwgLTE1MzA5OTIwNjApOwogICAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSArIDRdLCAxMSwgMTI3Mjg5MzM1Myk7CiAgICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpICsgN10sIDE2LCAtMTU1NDk3NjMyKTsKICAgICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2kgKyAxMF0sIDIzLCAtMTA5NDczMDY0MCk7CiAgICAgIGEgPSBtZDVfaGgoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA0LCA2ODEyNzkxNzQpOwogICAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSArIDBdLCAxMSwgLTM1ODUzNzIyMik7CiAgICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpICsgM10sIDE2LCAtNzIyNTIxOTc5KTsKICAgICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2kgKyA2XSwgMjMsIDc2MDI5MTg5KTsKICAgICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2kgKyA5XSwgNCwgLTY0MDM2NDQ4Nyk7CiAgICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpICsgMTJdLCAxMSwgLTQyMTgxNTgzNSk7CiAgICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpICsgMTVdLCAxNiwgNTMwNzQyNTIwKTsKICAgICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2kgKyAyXSwgMjMsIC05OTUzMzg2NTEpOwogICAgICBhID0gbWQ1X2lpKGEsIGIsIGMsIGQsIHhbaSArIDBdLCA2LCAtMTk4NjMwODQ0KTsKICAgICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2kgKyA3XSwgMTAsIDExMjY4OTE0MTUpOwogICAgICBjID0gbWQ1X2lpKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTUsIC0xNDE2MzU0OTA1KTsKICAgICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2kgKyA1XSwgMjEsIC01NzQzNDA1NSk7CiAgICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpICsgMTJdLCA2LCAxNzAwNDg1NTcxKTsKICAgICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2kgKyAzXSwgMTAsIC0xODk0OTg2NjA2KTsKICAgICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE1LCAtMTA1MTUyMyk7CiAgICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpICsgMV0sIDIxLCAtMjA1NDkyMjc5OSk7CiAgICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpICsgOF0sIDYsIDE4NzMzMTMzNTkpOwogICAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSArIDE1XSwgMTAsIC0zMDYxMTc0NCk7CiAgICAgIGMgPSBtZDVfaWkoYywgZCwgYSwgYiwgeFtpICsgNl0sIDE1LCAtMTU2MDE5ODM4MCk7CiAgICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpICsgMTNdLCAyMSwgMTMwOTE1MTY0OSk7CiAgICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpICsgNF0sIDYsIC0xNDU1MjMwNzApOwogICAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSArIDExXSwgMTAsIC0xMTIwMjEwMzc5KTsKICAgICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2kgKyAyXSwgMTUsIDcxODc4NzI1OSk7CiAgICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpICsgOV0sIDIxLCAtMzQzNDg1NTUxKTsKICAgICAgYSA9IHNhZmVfYWRkKGEsIG9sZGEpOwogICAgICBiID0gc2FmZV9hZGQoYiwgb2xkYik7CiAgICAgIGMgPSBzYWZlX2FkZChjLCBvbGRjKTsKICAgICAgZCA9IHNhZmVfYWRkKGQsIG9sZGQpOwogICAgfQoKICAgIHJldHVybiBBcnJheShhLCBiLCBjLCBkKTsKICB9CiAgLyoKICAgKiBUaGVzZSBmdW5jdGlvbnMgaW1wbGVtZW50IHRoZSBmb3VyIGJhc2ljIG9wZXJhdGlvbnMgdGhlIGFsZ29yaXRobSB1c2VzLgogICAqLwoKCiAgZnVuY3Rpb24gbWQ1X2NtbihxLCBhLCBiLCB4LCBzLCB0KSB7CiAgICByZXR1cm4gc2FmZV9hZGQoYml0X3JvbChzYWZlX2FkZChzYWZlX2FkZChhLCBxKSwgc2FmZV9hZGQoeCwgdCkpLCBzKSwgYik7CiAgfQoKICBmdW5jdGlvbiBtZDVfZmYoYSwgYiwgYywgZCwgeCwgcywgdCkgewogICAgcmV0dXJuIG1kNV9jbW4oYiAmIGMgfCB+YiAmIGQsIGEsIGIsIHgsIHMsIHQpOwogIH0KCiAgZnVuY3Rpb24gbWQ1X2dnKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHsKICAgIHJldHVybiBtZDVfY21uKGIgJiBkIHwgYyAmIH5kLCBhLCBiLCB4LCBzLCB0KTsKICB9CgogIGZ1bmN0aW9uIG1kNV9oaChhLCBiLCBjLCBkLCB4LCBzLCB0KSB7CiAgICByZXR1cm4gbWQ1X2NtbihiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpOwogIH0KCiAgZnVuY3Rpb24gbWQ1X2lpKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHsKICAgIHJldHVybiBtZDVfY21uKGMgXiAoYiB8IH5kKSwgYSwgYiwgeCwgcywgdCk7CiAgfQogIC8qCiAgICogQ2FsY3VsYXRlIHRoZSBITUFDLU1ENSwgb2YgYSBrZXkgYW5kIHNvbWUgZGF0YQogICAqLwoKCiAgZnVuY3Rpb24gY29yZV9obWFjX21kNShrZXksIGRhdGEpIHsKICAgIHZhciBia2V5ID0gc3RyMmJpbmwoa2V5KTsKICAgIGlmIChia2V5Lmxlbmd0aCA+IDE2KSBia2V5ID0gY29yZV9tZDUoYmtleSwga2V5Lmxlbmd0aCAqIGNocnN6KTsKICAgIHZhciBpcGFkID0gQXJyYXkoMTYpLAogICAgICAgIG9wYWQgPSBBcnJheSgxNik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CiAgICAgIGlwYWRbaV0gPSBia2V5W2ldIF4gMHgzNjM2MzYzNjsKICAgICAgb3BhZFtpXSA9IGJrZXlbaV0gXiAweDVDNUM1QzVDOwogICAgfQoKICAgIHZhciBoYXNoID0gY29yZV9tZDUoaXBhZC5jb25jYXQoc3RyMmJpbmwoZGF0YSkpLCA1MTIgKyBkYXRhLmxlbmd0aCAqIGNocnN6KTsKICAgIHJldHVybiBjb3JlX21kNShvcGFkLmNvbmNhdChoYXNoKSwgNTEyICsgMTI4KTsKICB9CiAgLyoKICAgKiBBZGQgaW50ZWdlcnMsIHdyYXBwaW5nIGF0IDJeMzIuIFRoaXMgdXNlcyAxNi1iaXQgb3BlcmF0aW9ucyBpbnRlcm5hbGx5CiAgICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy4KICAgKi8KCgogIGZ1bmN0aW9uIHNhZmVfYWRkKHgsIHkpIHsKICAgIHZhciBsc3cgPSAoeCAmIDB4RkZGRikgKyAoeSAmIDB4RkZGRik7CiAgICB2YXIgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7CiAgICByZXR1cm4gbXN3IDw8IDE2IHwgbHN3ICYgMHhGRkZGOwogIH0KICAvKgogICAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC4KICAgKi8KCgogIGZ1bmN0aW9uIGJpdF9yb2wobnVtLCBjbnQpIHsKICAgIHJldHVybiBudW0gPDwgY250IHwgbnVtID4+PiAzMiAtIGNudDsKICB9CiAgLyoKICAgKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMKICAgKiBJZiBjaHJzeiBpcyBBU0NJSSwgY2hhcmFjdGVycyA+MjU1IGhhdmUgdGhlaXIgaGktYnl0ZSBzaWxlbnRseSBpZ25vcmVkLgogICAqLwoKCiAgZnVuY3Rpb24gc3RyMmJpbmwoc3RyKSB7CiAgICB2YXIgYmluID0gQXJyYXkoKTsKICAgIHZhciBtYXNrID0gKDEgPDwgY2hyc3opIC0gMTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGggKiBjaHJzejsgaSArPSBjaHJzeikgewogICAgICBiaW5baSA+PiA1XSB8PSAoc3RyLmNoYXJDb2RlQXQoaSAvIGNocnN6KSAmIG1hc2spIDw8IGkgJSAzMjsKICAgIH0KCiAgICByZXR1cm4gYmluOwogIH0KICAvKgogICAqIENvbnZlcnQgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcyB0byBhIHN0cmluZwogICAqLwoKCiAgZnVuY3Rpb24gYmlubDJzdHIoYmluKSB7CiAgICB2YXIgc3RyID0gIiI7CiAgICB2YXIgbWFzayA9ICgxIDw8IGNocnN6KSAtIDE7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW4ubGVuZ3RoICogMzI7IGkgKz0gY2hyc3opIHsKICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmluW2kgPj4gNV0gPj4+IGkgJSAzMiAmIG1hc2spOwogICAgfQoKICAgIHJldHVybiBzdHI7CiAgfQogIC8qCiAgICogQ29udmVydCBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzIHRvIGEgaGV4IHN0cmluZy4KICAgKi8KCgogIGZ1bmN0aW9uIGJpbmwyaGV4KGJpbmFycmF5KSB7CiAgICB2YXIgaGV4X3RhYiA9IGhleGNhc2UgPyAiMDEyMzQ1Njc4OUFCQ0RFRiIgOiAiMDEyMzQ1Njc4OWFiY2RlZiI7CiAgICB2YXIgc3RyID0gIiI7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5hcnJheS5sZW5ndGggKiA0OyBpKyspIHsKICAgICAgc3RyICs9IGhleF90YWIuY2hhckF0KGJpbmFycmF5W2kgPj4gMl0gPj4gaSAlIDQgKiA4ICsgNCAmIDB4RikgKyBoZXhfdGFiLmNoYXJBdChiaW5hcnJheVtpID4+IDJdID4+IGkgJSA0ICogOCAmIDB4Rik7CiAgICB9CgogICAgcmV0dXJuIHN0cjsKICB9CiAgLyoKICAgKiBDb252ZXJ0IGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMgdG8gYSBiYXNlLTY0IHN0cmluZwogICAqLwoKCiAgZnVuY3Rpb24gYmlubDJiNjQoYmluYXJyYXkpIHsKICAgIHZhciB0YWIgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgICB2YXIgc3RyID0gIiI7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5hcnJheS5sZW5ndGggKiA0OyBpICs9IDMpIHsKICAgICAgdmFyIHRyaXBsZXQgPSAoYmluYXJyYXlbaSA+PiAyXSA+PiA4ICogKGkgJSA0KSAmIDB4RkYpIDw8IDE2IHwgKGJpbmFycmF5W2kgKyAxID4+IDJdID4+IDggKiAoKGkgKyAxKSAlIDQpICYgMHhGRikgPDwgOCB8IGJpbmFycmF5W2kgKyAyID4+IDJdID4+IDggKiAoKGkgKyAyKSAlIDQpICYgMHhGRjsKCiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7CiAgICAgICAgaWYgKGkgKiA4ICsgaiAqIDYgPiBiaW5hcnJheS5sZW5ndGggKiAzMikgc3RyICs9IGI2NHBhZDtlbHNlIHN0ciArPSB0YWIuY2hhckF0KHRyaXBsZXQgPj4gNiAqICgzIC0gaikgJiAweDNGKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBzdHI7CiAgfQoKICAkLmhleF9tZDUgPSBmdW5jdGlvbiBoZXhfbWQ1KHMpIHsKICAgIHJldHVybiBiaW5sMmhleChjb3JlX21kNShzdHIyYmlubChzKSwgcy5sZW5ndGggKiBjaHJzeikpOwogIH07CgogICQuYjY0X21kNSA9IGZ1bmN0aW9uIGI2NF9tZDUocykgewogICAgcmV0dXJuIGJpbmwyYjY0KGNvcmVfbWQ1KHN0cjJiaW5sKHMpLCBzLmxlbmd0aCAqIGNocnN6KSk7CiAgfTsKCiAgJC5zdHJfbWQ1ID0gZnVuY3Rpb24gc3RyX21kNShzKSB7CiAgICByZXR1cm4gYmlubDJzdHIoY29yZV9tZDUoc3RyMmJpbmwocyksIHMubGVuZ3RoICogY2hyc3opKTsKICB9OwoKICAkLmhleF9obWFjX21kNSA9IGZ1bmN0aW9uIGhleF9obWFjX21kNShrZXksIGRhdGEpIHsKICAgIHJldHVybiBiaW5sMmhleChjb3JlX2htYWNfbWQ1KGtleSwgZGF0YSkpOwogIH07CgogICQuYjY0X2htYWNfbWQ1ID0gZnVuY3Rpb24gYjY0X2htYWNfbWQ1KGtleSwgZGF0YSkgewogICAgcmV0dXJuIGJpbmwyYjY0KGNvcmVfaG1hY19tZDUoa2V5LCBkYXRhKSk7CiAgfTsKCiAgJC5zdHJfaG1hY19tZDUgPSBmdW5jdGlvbiBzdHJfaG1hY19tZDUoa2V5LCBkYXRhKSB7CiAgICByZXR1cm4gYmlubDJzdHIoY29yZV9obWFjX21kNShrZXksIGRhdGEpKTsKICB9OwoKICAkLm1kNSA9ICQuaGV4X21kNTsKfSkoKTsKLyoqCiAqIOWumuaXtuS7u+WKoeeuoeeQhuWZqAogKi8KCgooZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFRpbWVyKCkgewogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5Zue6LCD5a+56LGh6ZuG5ZCICiAgICAgKiBAZXhhbXBsZQogICAgICogW3sKICAgIAkgLy8g5ZCN56ewCiAgICAJIG5hbWU6ICIiLAogICAgCSAvLyDmiafooYzlh73mlbAKICAgIAkgYXN5bmMgcnVuKCl7fQogICAgCX1dCiAgICAgKi8KICAgIHZhciBsaXN0ID0gW107IC8vIOWumuaXtuWZqOaguOW/gwoKICAgIHRoaXMuY29yZTsKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOaJp+ihjAogICAgICovCgogICAgVGltZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBydW4gPSBsaXN0W2ldLnJ1bjsKCiAgICAgICAgaWYgKHJ1bikgewogICAgICAgICAgcnVuKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5ZCv5YqoCiAgICAgKi8KCgogICAgVGltZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmNvcmUpIHsKICAgICAgICB0aGlzLmNvcmUgPSBzZXRJbnRlcnZhbCh0aGlzLnJ1biwgMTAwMCk7CiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDnu5PmnZ8KICAgICAqLwoKCiAgICBUaW1lci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMuY29yZSk7CiAgICAgIHRoaXMuY29yZSA9IHVuZGVmaW5lZDsKICAgIH07CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDmt7vliqDlrprml7bmiafooYzku7vliqEKICAgICAqLwoKCiAgICBUaW1lci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKG9iaikgewogICAgICBpZiAoX3R5cGVvZihvYmopID09PSAib2JqZWN0IikgewogICAgICAgIGlmIChvYmoubmFtZSAmJiBvYmoucnVuICYmIHR5cGVvZiBvYmoucnVuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBsaXN0LnB1c2gob2JqKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDliKDpmaTlrprml7bmiafooYzku7vliqEKICAgICAqLwoKCiAgICBUaW1lci5wcm90b3R5cGUuZGVsID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgaWYgKCh0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICBsaXN0LmRlbCh7CiAgICAgICAgICBuYW1lOiBuYW1lCiAgICAgICAgfSwgdHJ1ZSk7CiAgICAgIH0KICAgIH07CiAgfQoKICA7CiAgJC50aW1lciA9IG5ldyBUaW1lcigpOwp9KSgpOwoKKGZ1bmN0aW9uICgpIHsKICAvKiA9PSDnvZHnu5zor7fmsYIgPT0gKi8KICAkLmh0dHAgPSB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiBHRVTor7fmsYLigJTigJRqc29uCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIOivt+axguWcsOWdgAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuIOWbnuiwg+WHveaVsAogICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnMg5Y2P6K6u5aS0CiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IOWQjOatpeivt+axgui/lOWbnuivt+axgue7k+aenO+8jOWQpuWImei/lOWbnnVuZGVmaW5lZAogICAgICovCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCh1cmwsIGZ1biwgaGVhZGVycykgewogICAgICB2YXIganNvbjsKICAgICAgdmFyIGhwID0gewogICAgICAgIHR5cGU6ICdHRVQnLAogICAgICAgIHVybDogdXJsLAogICAgICAgIGFzeW5jOiBmdW4gIT09IG51bGwsCiAgICAgICAgLy8geGhyRmllbGRzOiB7CiAgICAgICAgLy8gCXdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgIC8vIH0sCiAgICAgICAgLy8gY3Jvc3NEb21haW46IHRydWUsCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhLCBzdGF0dXMpIHsKICAgICAgICAgIGlmIChmdW4pIHsKICAgICAgICAgICAgZnVuKGRhdGEsIHN0YXR1cyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBqc29uID0gewogICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihkYXRhLCBzdGF0dXMpIHsKICAgICAgICAgIGlmIChmdW4pIHsKICAgICAgICAgICAgZnVuKGRhdGEsIHN0YXR1cyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBqc29uID0gewogICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZShYSFIsIFRTKSB7CiAgICAgICAgICBYSFIgPSBudWxsOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChoZWFkZXJzKSB7CiAgICAgICAgaHAuaGVhZGVycyA9IGhlYWRlcnM7CiAgICAgIH0KCiAgICAgICQuYWpheChocCk7CiAgICAgIHJldHVybiBqc29uOwogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiBQT1NU6K+35rGCCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIOivt+axguWcsOWdgAogICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtIOivt+axguWPguaVsAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuIOWbnuiwg+WHveaVsAogICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnMg5Y2P6K6u5aS0CiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSDlhoXlrrnnsbvlnosKICAgICAqIEByZXR1cm4ge09iamVjdH0g5ZCM5q2l6K+35rGC6L+U5Zue6K+35rGC57uT5p6c77yM5ZCm5YiZ6L+U5ZuedW5kZWZpbmVkCiAgICAgKi8KICAgIHBvc3Q6IGZ1bmN0aW9uIHBvc3QodXJsLCBwYXJhbSwgZnVuLCBoZWFkZXJzLCB0eXBlKSB7CiAgICAgIHZhciBjb250ZW50VHlwZTsKICAgICAgdmFyIHBtOwoKICAgICAgaWYgKHR5cGUgPT09ICd4bWwnKSB7CiAgICAgICAgY29udGVudFR5cGUgPSAidGV4dC94bWw7IGNoYXJzZXQ9dXRmLTgiOwogICAgICAgIHBtID0gcGFyYW07CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Zvcm0nKSB7CiAgICAgICAgY29udGVudFR5cGUgPSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PXV0Zi04IjsKICAgICAgICBwbSA9IHBhcmFtOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnRlbnRUeXBlID0gImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiOwogICAgICAgIHBtID0gSlNPTi5zdHJpbmdpZnkocGFyYW0pOwogICAgICB9CgogICAgICB2YXIganNvbjsKICAgICAgdmFyIGhwID0gewogICAgICAgIHR5cGU6ICdQT1NUJywKICAgICAgICB1cmw6IHVybCwKICAgICAgICBhc3luYzogZnVuICE9PSBudWxsLAogICAgICAgIC8vIHhockZpZWxkczogewogICAgICAgIC8vIAl3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAvLyB9LAogICAgICAgIC8vIGNyb3NzRG9tYWluOiB0cnVlLAogICAgICAgIGRhdGE6IHBtLAogICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSwgc3RhdHVzKSB7CiAgICAgICAgICBpZiAoZnVuKSB7CiAgICAgICAgICAgIGZ1bihkYXRhLCBzdGF0dXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAganNvbiA9IHsKICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZGF0YSwgc3RhdHVzKSB7CiAgICAgICAgICBpZiAoZnVuKSB7CiAgICAgICAgICAgIGZ1bihkYXRhLCBzdGF0dXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAganNvbiA9IHsKICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUoWEhSLCBUUykgewogICAgICAgICAgWEhSID0gbnVsbDsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoaGVhZGVycykgewogICAgICAgIGhwLmhlYWRlcnMgPSBoZWFkZXJzOwogICAgICB9CgogICAgICAkLmFqYXgoaHApOwogICAgICByZXR1cm4ganNvbjsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5LiK5Lyg5paH5Lu2CiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIOivt+axguWcsOWdgAogICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGUgaW5wdXQgZmlsZeaWh+S7tgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuIOWbnuiwg+WHveaVsAogICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnMg5Y2P6K6u5aS0CiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IOWQjOatpeivt+axgui/lOWbnuivt+axgue7k+aenO+8jOWQpuWImei/lOWbnnVuZGVmaW5lZAogICAgICovCiAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZCh1cmwsIGZpbGUsIGZ1biwgaGVhZGVycykgewogICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtLmFwcGVuZCgiZmlsZSIsIGZpbGUpOwogICAgICB2YXIganNvbjsKICAgICAgdmFyIGhwID0gewogICAgICAgIHR5cGU6ICdQT1NUJywKICAgICAgICB1cmw6IHVybCwKICAgICAgICBhc3luYzogZnVuICE9PSBudWxsLAogICAgICAgIGRhdGE6IGZvcm0sCiAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsCiAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSwgc3RhdHVzKSB7CiAgICAgICAgICBpZiAoZnVuKSB7CiAgICAgICAgICAgIGZ1bihkYXRhLCBzdGF0dXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAganNvbiA9IHsKICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZGF0YSwgc3RhdHVzKSB7CiAgICAgICAgICBpZiAoZnVuKSB7CiAgICAgICAgICAgIGZ1bihkYXRhLCBzdGF0dXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAganNvbiA9IHsKICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUoWEhSLCBUUykgewogICAgICAgICAgWEhSID0gbnVsbDsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoaGVhZGVycykgewogICAgICAgIGhwLmhlYWRlcnMgPSBoZWFkZXJzOwogICAgICB9CgogICAgICAkLmFqYXgoaHApOwogICAgICByZXR1cm4ganNvbjsKICAgIH0KICB9OwogIC8qIOe8k+WtmCAqLwoKICAkLmNvb2tpZXMgPSB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDorr7nva7ln58KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwg5Zyw5Z2ACiAgICAgKi8KICAgIGRvbWFpbjogZnVuY3Rpb24gZG9tYWluKHVybCkgewogICAgICBpZiAodXJsKSB7CiAgICAgICAgX2RvbWFpbiA9IHVybDsKICAgICAgfQoKICAgICAgcmV0dXJuICI7cGF0aD0vIjsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g6K6+572u57yT5a2YCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSDnvJPlrZjlr7nosaEKICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSDnvJPlrZjlgLwKICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtaW51dGVzIOe8k+WtmOaXtumVv++8jOWNleS9jTog5YiG6ZKfCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIOS9nOeUqOWfnwogICAgICovCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChuYW1lLCB2YWx1ZSwgbWludXRlcywgZG9tYWluKSB7CiAgICAgIGlmICghZG9tYWluKSB7CiAgICAgICAgZG9tYWluID0gJC5jb29raWVzLmRvbWFpbigpOwogICAgICB9CgogICAgICB2YXIgdGltZSA9IG5ldyBEYXRlKCk7CgogICAgICBpZiAobWludXRlcykgewogICAgICAgIHRpbWUuc2V0VGltZSh0aW1lLmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MDAwMCk7CiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICI9IiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgKyAiO2V4cGlyZXM9IiArIHRpbWUudG9HTVRTdHJpbmcoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aW1lLnNldFRpbWUodGltZS5nZXRUaW1lKCkgKyA3ICogMjQgKiAzNjAwICogNjAwMDApOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpICsgIjtleHBpcmVzPSIgKyB0aW1lLnRvR01UU3RyaW5nKCk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g6I635Y+WY29va2llCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSDlkI3np7AKICAgICAqLwogICAgZ2V0OiBmdW5jdGlvbiBnZXQobmFtZSkgewogICAgICB2YXIgdmFsdWUgPSBudWxsOwogICAgICB2YXIgc3RyID0gZG9jdW1lbnQuY29va2llOwogICAgICB2YXIgYXJyID0gc3RyLnNwbGl0KCI7ICIpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgYXIgPSBhcnJbaV0uc3BsaXQoIj0iKTsKCiAgICAgICAgaWYgKGFyWzBdID09IG5hbWUpIHsKICAgICAgICAgIHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KGFyWzFdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDliKDpmaRjb29raWUKICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIOWQjeensAogICAgICovCiAgICBkZWw6IGZ1bmN0aW9uIGRlbChuYW1lKSB7CiAgICAgIHRoaXMuc2V0KG5hbWUsICIiLCAtMSk7CiAgICB9CiAgfTsKICAvKioKICAgKiBAZGVzY3JpcHRpb24g6K6+572u5oiW5p+l6K+iY29va2ll57yT5a2YCiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSDnvJPlrZjlr7nosaHlkI0KICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWUg57yT5a2Y5YC8CiAgICogQHBhcmFtIHtOdW1iZXJ9IG1pbnV0ZXMg57yT5a2Y5pe26ZW/77yM5Y2V5L2NOiDliIbpkp8KICAgKi8KCiAgJC5jb29raWUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgbWludXRlcykgewogICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICBpZiAoIW1pbnV0ZXMpIHsKICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgICAgICAgbWludXRlcyA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1pbnV0ZXMgPSAxMjA7CiAgICAgICAgfQogICAgICB9CgogICAgICAkLmNvb2tpZXMuc2V0KGtleSwgdmFsdWUsIG1pbnV0ZXMpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICQuY29va2llcy5nZXQoa2V5KTsKICAgIH0KICB9OwogIC8qID09PSDlpJrlqpLkvZMgPT09ICovCgoKICAkLmZpbGUgPSB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDkuIrkvKDmlofku7YKICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwg5o+Q5Lqk572R5Z2ACiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIOWvueixoQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyDlh73mlbAKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzIOWNj+iuruWktAogICAgICovCiAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZCh1cmwsIG9iaiwgZnVuYywgaGVhZGVycykgewogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgIGZvciAodmFyIGsgaW4gb2JqKSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKGssIG9ialtrXSk7CiAgICAgIH0KCiAgICAgIHZhciBocCA9IHsKICAgICAgICB0eXBlOiAnUE9TVCcsCiAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgZGF0YTogZm9ybURhdGEsCiAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSwKICAgICAgICBhc3luYzogZnVuYyAhPT0gbnVsbCwKICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2Vzcyhqc29uLCBzdGF0dXMpIHsKICAgICAgICAgIGlmIChmdW5jKSB7CiAgICAgICAgICAgIGlmIChqc29uKSB7CiAgICAgICAgICAgICAganNvblsib2JqIl0gPSBvYmo7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmMoanNvbiwgc3RhdHVzKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZShYSFIsIFRTKSB7CiAgICAgICAgICBYSFIgPSBudWxsOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChoZWFkZXJzKSB7CiAgICAgICAgaHAuaGVhZGVycyA9IGhlYWRlcnM7CiAgICAgIH0KCiAgICAgICQuYWpheChocCk7CiAgICB9CiAgfTsKfSkoKTsKLyog6YCa6K6vICovCgoKKGZ1bmN0aW9uICgpIHsKICAkLmh0bWwgPSB7CiAgICB0YWc6IGZ1bmN0aW9uIHRhZyhfdGFnLCBwcm9wLCB2YWx1ZSkgewogICAgICB2YXIgb2JqOwogICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKF90YWcpOwogICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIG8gPSBsaXN0W2ldOwoKICAgICAgICBpZiAobyAmJiBvLmdldEF0dHJpYnV0ZShwcm9wKSAmJiBvLmdldEF0dHJpYnV0ZShwcm9wKS5oYXModmFsdWUpKSB7CiAgICAgICAgICBvYmogPSBvOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb2JqOwogICAgfQogIH07CiAgLyoqCiAgICog5pys5Zyw5Li05pe257yT5a2YLOWFs+mXrea1j+iniOWZqOWQjuWwj+aXtgogICAqLwoKICAkLmNhY2hlID0gewogICAgLyoqCiAgICAgKiDorr7nva7lgLwKICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkg6ZSuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWUg5YC8CiAgICAgKi8KICAgIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHsKICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7CiAgICB9LAoKICAgIC8qKgogICAgICog6I635Y+W5YC8CiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IOmUrgogICAgICogQHJldHVybiB7T2JqZWN0fSDlgLwKICAgICAqLwogICAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7CiAgICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgfSwKCiAgICAvKioKICAgICAqIOWIoOmZpOWAvAogICAgICogQHBhcmFtIHtPYmplY3R9IGtleSDplK4KICAgICAqLwogICAgZGVsOiBmdW5jdGlvbiBkZWwoa2V5KSB7CiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgICB9LAoKICAgIC8qKgogICAgICog5riF6Zmk5omA5pyJ57yT5a2YCiAgICAgKi8KICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICB9CiAgfTsKICAvKioKICAgKiDmnKzlnLDmlbDmja7lupPlrZjlgqgKICAgKi8KCiAgJC5kYiA9IHsKICAgIC8qKgogICAgICog6K6+572u5YC8CiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IOmUrgogICAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlIOWAvAogICAgICogQHBhcmFtIHtOdW1iZXJ9IGxvbmdUaW1lIOS/neWtmOaXtumVv++8iOWNleS9jTrliIbpkp/vvIkKICAgICAqLwogICAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSwgbG9uZ1RpbWUpIHsKICAgICAgdmFyIGV4cGlyZXMgPSBudWxsOwoKICAgICAgaWYgKGxvbmdUaW1lKSB7CiAgICAgICAgdmFyIHRpbWUgPSBEYXRlLm5vdygpOwogICAgICAgIGV4cGlyZXMgPSB0aW1lICsgbG9uZ1RpbWUgKiA2MDAwMDsKICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIGV4cGlyZXM6IGV4cGlyZXMKICAgICAgfTsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgfSwKCiAgICAvKioKICAgICAqIOiOt+WPluWAvAogICAgICogQHBhcmFtIHtTdHJpbmd9IGtleSDplK4KICAgICAqIEByZXR1cm4ge09iamVjdH0g5YC8CiAgICAgKi8KICAgIGdldDogZnVuY3Rpb24gZ2V0KGtleSkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIHZhciB0ZXh0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7CgogICAgICBpZiAodGV4dCAmJiB0ZXh0LmluZGV4T2YoJ3snKSA9PT0gMCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UodGV4dCk7CgogICAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgICAgaWYgKGRhdGEuZXhwaXJlcykgewogICAgICAgICAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoZGF0YS5leHBpcmVzKTsKCiAgICAgICAgICAgICAgaWYgKHRpbWUgPiBEYXRlLm5vdygpKSB7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRhdGEudmFsdWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YWx1ZSA9IGRhdGEudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIHZhbHVlID0gdGV4dDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWUgPSB0ZXh0OwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9LAoKICAgIC8qKgogICAgICog5Yig6Zmk5YC8CiAgICAgKiBAcGFyYW0ge09iamVjdH0ga2V5IOmUrgogICAgICovCiAgICBkZWw6IGZ1bmN0aW9uIGRlbChrZXkpIHsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgICB9CiAgfTsKICAvKioKICAgKiB3ZWIgc29ja2V06YCa6K6v57uECiAgICovCgogICQud3MgPSB7fTsKICAvKiDlsIHoo4UgV2ViU29ja2V0IOWunuS+i+WMlueahOaWueazlSAgKi8KCiAgdmFyIENyZWF0ZVdlYlNvY2tldCA9IGZ1bmN0aW9uICh1cmwpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodXJsKSB7CiAgICAgIHZhciB3czsKCiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHdpbmRvdy5XZWJTb2NrZXQpIHsKICAgICAgICAgIHdzID0gbmV3IFdlYlNvY2tldCh1cmwpOwogICAgICAgIH0gZWxzZSBpZiAod2luZG93Lk1veldlYlNvY2tldCkgewogICAgICAgICAgd3MgPSBuZXcgTW96V2ViU29ja2V0KHVybCk7CiAgICAgICAgfQoKICAgICAgICA7CiAgICAgIH0gY2F0Y2ggKGUpIHsvL1RPRE8gaGFuZGxlIHRoZSBleGNlcHRpb24KICAgICAgfQoKICAgICAgcmV0dXJuIHdzOwogICAgfTsKICB9KCk7CiAgLyoqCiAgICog562J5b6F6L+e5o6l5oiQ5YqfLCDnhLblkI7lj5HpgIHmtojmga8KICAgKi8KCgogIGZ1bmN0aW9uIGNvbm5lY3QoX3RoaXMpIHsKICAgIGlmIChfdGhpcy50cnlfY29ubmVjdCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgX3RoaXMudHJ5X2Nvbm5lY3QgPSB0cnVlOwogICAgdmFyIHdzID0gQ3JlYXRlV2ViU29ja2V0KF90aGlzLnVybCk7CgogICAgd3Mub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIF90aGlzLm1lc3NhZ2UoZXZlbnQpOwogICAgfTsKCiAgICB3cy5vbmNsb3NlID0gZnVuY3Rpb24gKCkgewogICAgICByZWNvbm5lY3QoX3RoaXMpOwogICAgfTsKCiAgICB3cy5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIF90aGlzLm5vdGljeSgiZXJyb3IiLCBldmVudCk7CiAgICB9OwoKICAgIHdzLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMudHJ5X2Nvbm5lY3QgPSBmYWxzZTsKICAgICAgdmFyIGFyciA9IF90aGlzLmFycl9tZXNzYWdlOwogICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpZiAod3MucmVhZHlTdGF0ZSA9PT0gMSkgewogICAgICAgICAgX3RoaXMud3Muc2VuZChhcnJbaV0pOwogICAgICAgIH0KICAgICAgfSAvLyDlj5HpgIHmiJDlip8sIOa4heepuua2iOaBr+e7hAoKCiAgICAgIF90aGlzLmFycl9tZXNzYWdlLmNsZWFyKCk7IC8vIOmHjee9rumHjeaWsOi/nuaOpeasoeaVsAoKCiAgICAgIF90aGlzLnRyeV90aW1lcyA9IDA7CiAgICB9OwoKICAgIF90aGlzLndzID0gd3M7CiAgfQoKICA7CiAgLyoqCiAgICog6YeN5paw6L+e5o6lCiAgICogQHBhcmFtIHtPYmplY3R9IF90aGlzIHdz5a+56LGhCiAgICovCgogIGZ1bmN0aW9uIHJlY29ubmVjdChfdGhpcykgewogICAgX3RoaXMudHJ5X3RpbWVzKys7CgogICAgaWYgKF90aGlzLnRyeV90aW1lcyA8PSBfdGhpcy50cnlfbWF4X3RpbWVzKSB7CiAgICAgIF90aGlzLnRyeV9jb25uZWN0ID0gZmFsc2U7IC8vIOayoei/nuaOpeS4iuS8muS4gOebtOmHjei/nu+8jOiuvue9ruW7tui/n+mBv+WFjeivt+axgui/h+WkmgoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY29ubmVjdChfdGhpcyk7CiAgICAgIH0sIF90aGlzLnNlY29uZHMpOwoKICAgICAgX3RoaXMubm90aWN5KCdyZWNvbm5lY3QnLCBfdGhpcy50cnlfdGltZXMpOwogICAgfSBlbHNlIHsKICAgICAgX3RoaXMubm90aWN5KCdlcnJvcicsICfmnI3liqHlmajov57mjqXlpLHotKUhJyk7CiAgICB9CiAgfQoKICA7CiAgLyoqCiAgICog5p6E6YCg6YCa6K6v5Ye95pWwCiAgICogQHBhcmFtIHtTdHJpbmd9IHVybAogICAqIEBwYXJhbSB7RnVuY3Rpb259IG5vdGljeSDpgJrnn6Xlh73mlbAKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWNlaXZlIOWTjeW6lOWbnuiwg+WHveaVsAogICAqIEBwYXJhbSB7RnVuY3Rpb259IG5vdGljeSDkv6Hmga/mjZXmjYnlh73mlbAKICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSDlkI3np7AKICAgKiBAcGFyYW0ge051bWJlcn0gc2Vjb25kcyDph43mlrDov57mjqXmrKHmlbAKICAgKiBAcmV0dXJuIHtPYmplY3R9IOi/lOWbnuWPkeS/oeacjeWKoQogICAqLwoKICBmdW5jdGlvbiBXUyh1cmwsIHJlY2VpdmUsIG5vdGljeSwgbmFtZSwgc2Vjb25kcykgewogICAgaWYgKG5vdGljeSkgewogICAgICB0aGlzLm5vdGljeSA9IG5vdGljeTsKICAgIH0gZWxzZSB7CiAgICAgIC8qKgogICAgICAgKiDpgJrnn6Xlh73mlbAKICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUg6YCa55+l57G75Z6LCiAgICAgICAqLwogICAgICB0aGlzLm5vdGljeSA9IGZ1bmN0aW9uICh0eXBlLCBjb250ZW50KSB7CiAgICAgICAgY29uc29sZS5sb2codHlwZSwgY29udGVudCk7CiAgICAgIH07CiAgICB9CgogICAgaWYgKCF3aW5kb3cuV2ViU29ja2V0KSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+mUmeivrzog5rWP6KeI5Zmo5LiN5pSv5oyBd2Vic29ja2V0Jyk7CiAgICAgIHRoaXMubm90aWN5KCdlcnJvcicsICfmtY/op4jlmajkuI3mlK/mjIF3ZWJzb2NrZXQnKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciB1OwoKICAgIGlmICh1cmwuaW5kZXhPZignLy8nKSAhPT0gLTEpIHsKICAgICAgdSA9IHVybC5yZXBsYWNlKCJodHRwcyIsICJ3cyIpLnJlcGxhY2UoImh0dHAiLCAid3MiKTsKICAgIH0gZWxzZSB7CiAgICAgIHUgPSAid3M6Ly8iICsgdXJsOwogICAgfSAvLyDov57mjqXlnLDlnYAKCgogICAgdGhpcy51cmwgPSB1OwoKICAgIGlmIChuYW1lKSB7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9IGVsc2UgewogICAgICB0aGlzLm5hbWUgPSB1OwogICAgfQoKICAgIHRoaXMucmVjZWl2ZSA9IHJlY2VpdmU7IC8vIOa2iOaBr+aVsOe7hCwg5Zyo562J5b6F6L+e5o6l55qE6L+H56iL5LitLCDlpoLmnpzmnInlpJrmnaHmtojmga8sIOWImeS/neWtmOiHs+atpCwg562J5b6F6L+e5o6l5oiQ5Yqf5ZCO5Y+R6YCBCgogICAgdGhpcy5hcnJfbWVzc2FnZSA9IFtdOwoKICAgIGlmIChzZWNvbmRzKSB7CiAgICAgIHRoaXMuc2Vjb25kcyA9IHNlY29uZHM7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnNlY29uZHMgPSA2MDAwOwogICAgfQogICAgLyoqCiAgICAgKiDlsJ3or5Xph43ov57mrKHmlbAKICAgICAqLwoKCiAgICB0aGlzLnRyeV90aW1lcyA9IDA7CiAgICAvKioKICAgICAqIOacgOWkp+WwneivleasoeaVsCwg5aaC5p6c5q+P5qyh6YeN6K+V6Ze06ZqUMeWIhumSnywg6YKj5LmIMTDliIbpkp/lkI7lsLHkuI3lho3ph43ov54KICAgICAqLwoKICAgIHRoaXMudHJ5X21heF90aW1lcyA9IDEwOwogICAgLyoqCiAgICAgKiDmmK/lkKbmraPlnKjlsJ3or5Xov57mjqUKICAgICAqLwoKICAgIHRoaXMudHJ5X2Nvbm5lY3QgPSBmYWxzZTsgLy8g6L+e5o6lIHNvY2tldOacjeWKoQoKICAgIGNvbm5lY3QodGhpcyk7CiAgfQogIC8qKgogICAqIOaJk+W8gOacjeWKoQogICAqLwoKCiAgV1MucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICBjb25uZWN0KHRoaXMpOwogIH07CiAgLyoqCiAgICog5YWz6Zet5pyN5YqhCiAgICovCgoKICBXUy5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLndzLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHt9OwoKICAgIHRoaXMud3MuY2xvc2UoKTsKICB9OwogIC8qKgogICAqIOmHiuaUvgogICAqLwoKCiAgV1MucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5jbG9zZSgpOwogICAgZGVsZXRlICQud3Nba2V5XTsKICB9OwogIC8qKgogICAqIOaUtuWIsOa2iOaBrwogICAqLwoKCiAgV1MucHJvdG90eXBlLm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHZhciBkYXRhID0gZXZlbnQuZGF0YTsKCiAgICBpZiAoZGF0YSAmJiB0aGlzLnJlY2VpdmUpIHsKICAgICAgdGhpcy5yZWNlaXZlKGRhdGEpOwogICAgfQogIH07CiAgLyoqCiAgICog5Y+R6YCB5pWw5o2uCiAgICogQHBhcmFtIHtTdHJpbmd9IGJvZHlTdHIg5raI5oGv5Li75L2T5a2X56ym5LiyCiAgICovCgoKICBXUy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChib2R5U3RyKSB7CiAgICB2YXIgd3MgPSB0aGlzLndzOwoKICAgIHN3aXRjaCAod3MucmVhZHlTdGF0ZSkgewogICAgICBjYXNlIDA6CiAgICAgICAgLy8gQ09OTkVDVElORyDmraPlnKjov57mjqUKICAgICAgICAvLyDlhYjlsIbmtojmga/liqDlhaXpmJ/liJfnrYnlvoXov57mjqXmiJDlip/lho3lj5HpgIEKICAgICAgICB0aGlzLmFycl9tZXNzYWdlLnB1c2goYm9keVN0cik7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDE6CiAgICAgICAgLy8gT1BFTiDov57mjqXmiJDlip/vvIzlj6/ku6XpgJrkv6HkuoYKICAgICAgICB3cy5zZW5kKGJvZHlTdHIpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyOgogICAgICAgIC8vIENMT1NJTkcg6L+e5o6l5q2j5Zyo5YWz6ZetCiAgICAgICAgLy8g5YWI5bCG5raI5oGv5Yqg5YWl6Zif5YiXLCDnrYnlvoXlhbPpl60gPiDph43mlrDov57mjqUgPiDov57mjqXmiJDlip8g5YaN5Y+R6YCB5raI5oGvCiAgICAgICAgdGhpcy5hcnJfbWVzc2FnZS5wdXNoKGJvZHlTdHIpOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBpZiAodGhpcy50cnlfdGltZXMgPiA5KSB7CiAgICAgICAgICB0aGlzLnRyeV90aW1lcyA9IDA7CiAgICAgICAgICB0aGlzLnRyeV9jb25uZWN0ID0gZmFsc2U7CiAgICAgICAgfSAvLyBDTE9TRUQg6L+e5o6l5bey57uP5YWz6Zet77yM5oiW6ICF5omT5byA6L+e5o6l5aSx6LSlCiAgICAgICAgLy8g5YWI5bCG5raI5oGv5Yqg5YWl6Zif5YiXLCDph43mlrDov57mjqUgPiDov57mjqXmiJDlip8g5YaN5Y+R6YCB5raI5oGvCgoKICAgICAgICB0aGlzLmFycl9tZXNzYWdlLnB1c2goYm9keVN0cik7CiAgICAgICAgY29ubmVjdCh0aGlzKTsKICAgICAgICBicmVhazsKICAgIH0KICB9OwogIC8qKgogICAqIOS4u+WKqOWFs+mXrei/nuaOpQogICAqLwoKCiAgV1MucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy53cy5jbG9zZSgpOwogIH07CiAgLyoqCiAgICog5Yib5bu6d2ViIHNvY2tldOmAmuiur+acjeWKoQogICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVVJM5Zyw5Z2ACiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVjZWl2ZSDlk43lupTlm57osIPlh73mlbAKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBub3RpY3kg5L+h5oGv5o2V5o2J5Ye95pWwCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUg5ZCN56ewCiAgICogQHBhcmFtIHtTdHJpbmd9IHNlY29uZHMg56eSCiAgICogQHJldHVybiB7T2JqZWN0fSDov5Tlm57lj5Hkv6HmnI3liqEKICAgKi8KCgogICQuc29ja2V0ID0gZnVuY3Rpb24gKHVybCwgcmVjZWl2ZSwgbm90aWN5LCBuYW1lLCBzZWNvbmRzKSB7CiAgICAvLyDkvb/nlKjplK7mlrnlvI/ljrvmn6Xor6LlpJrkuKrpgJrorq8KICAgIC8vIOmcgOimgeWkmumAmuiur+eahOWOn+WboOaYrzog5YOP5Lqk5piT5omA5Y+v6IO96ZyA6KaB5Y2z5pe26YCa6K6v55qE5ZCM5pe26L+Y6ZyA6KaB6K+V6K+V5Y+Y5YyW5Lqk5piT5L+h5oGvCiAgICBpZiAoIW5hbWUpIHsKICAgICAgbmFtZSA9IHVybDsKICAgIH0KCiAgICBpZiAoISQud3NbbmFtZV0pIHsKICAgICAgJC53c1tuYW1lXSA9IG5ldyBXUyh1cmwsIHJlY2VpdmUsIG5vdGljeSwgbmFtZSwgc2Vjb25kcyk7CiAgICB9IGVsc2UgewogICAgICAkLndzW25hbWVdLnRyeV90aW1lcyA9IDA7CiAgICB9CgogICAgcmV0dXJuICQud3NbbmFtZV07CiAgfTsKICAvKioKICAgKiDot6/nlLEKICAgKi8KCgogICQucm91dGUgPSB7CiAgICAvKioKICAgICAqIOmHjeWumuWQkeWcsOWdgAogICAgICovCiAgICByZWRpcmVjdF91cmw6ICIvIiwKCiAgICAvKioKICAgICAqIOi3r+eUseWOhuWPsuiusOW9lQogICAgICovCiAgICBoaXN0b3J5OiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBwdXNoOiBmdW5jdGlvbiBwdXNoKHVybCkgewogICAgICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIGVuZF91cmwgPSB0aGlzLmxpc3RbdGhpcy5saXN0Lmxlbmd0aCAtIDFdOwoKICAgICAgICAgIGlmIChlbmRfdXJsICE9PSB1cmwpIHsKICAgICAgICAgICAgdGhpcy5saXN0LnB1c2godXJsKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5saXN0LnB1c2godXJsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiDmt7vliqDot6/nlLEKICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwKICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZQogICAgICovCiAgICBwdXNoOiBmdW5jdGlvbiBwdXNoKHVybCwgdGl0bGUpIHsKICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoewogICAgICAgIHN0YXR1czogMAogICAgICB9LCB0aXRsZSwgdXJsKTsKICAgIH0KICB9OwogIC8qKgogICAqIOa1j+iniOWZqAogICAqLwoKICAkLm9zID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHUgPSBuYXZpZ2F0b3IudXNlckFnZW50OwogICAgcmV0dXJuIHsKICAgICAgdmVyc2lvbjogbmF2aWdhdG9yLmFwcFZlcnNpb24sCiAgICAgIGlzQXBwOiB1LmluZGV4T2YoIkh0bWw1UGx1cyIpICE9PSAtMSwKICAgICAgZGV2aWNlOiB7CiAgICAgICAgLy8g5piv5ZCm5Li656e75Yqo57uI56uvCiAgICAgICAgbW9iaWxlOiAvQXBwbGVXZWJLaXQuKk1vYmlsZS4qLy50ZXN0KHUpLAogICAgICAgIC8vIGlvc+e7iOerrwogICAgICAgIGlvczogL1woaVteO10rOyggVTspPyBDUFUuK01hYyBPUyBYLy50ZXN0KHUpLAogICAgICAgIC8vIGFuZHJvaWTnu4jnq6/miJZMaW51eOa1j+iniOWZqAogICAgICAgIGFuZHJvaWQ6IHUuaW5kZXhPZignQW5kcm9pZCcpICE9PSAtMSB8fCB1LmluZGV4T2YoJ0xpbnV4JykgIT09IC0xLAogICAgICAgIC8vIOaYr+WQpuS4umlQaG9uZeaIluiAhVFRSETmtY/op4jlmagKICAgICAgICBpUGhvbmU6IHUuaW5kZXhPZignaVBob25lJykgIT09IC0xLAogICAgICAgIC8vIOaYr+WQpmlQYWQKICAgICAgICBpUGFkOiB1LmluZGV4T2YoJ2lQYWQnKSAhPT0gLTEsCiAgICAgICAgLy8g5piv5ZCm55S16ISRCiAgICAgICAgcGM6IHUuaW5kZXhPZignV2luZG93JykgIT09IC0xCiAgICAgIH0sCiAgICAgIGFwcDogewogICAgICAgIC8vIOW+ruS/oQogICAgICAgIHdlY2hhdDogL01pY3JvTWVzc2VuZ2VyL2kudGVzdCh1KSwKICAgICAgICAvLyDlvq7ljZoKICAgICAgICB3ZWlibzogL1dlaUJvL2kudGVzdCh1KSwKICAgICAgICAvLyBRUQogICAgICAgIHFxOiAvUVEvaS50ZXN0KHUpCiAgICAgIH0sCiAgICAgIGJyb3dzZXI6IHsKICAgICAgICAvLyDmtY/op4jlmajniYjmnKzkv6Hmga8KICAgICAgICAvLyBJReWGheaguAogICAgICAgIHRyaWRlbnQ6IHUuaW5kZXhPZignVHJpZGVudCcpID4gLTEsCiAgICAgICAgLy8gb3BlcmHlhoXmoLgKICAgICAgICBwcmVzdG86IHUuaW5kZXhPZignUHJlc3RvJykgPiAtMSwKICAgICAgICAvLyDoi7nmnpzjgIHosLfmrYzlhoXmoLgKICAgICAgICB3ZWJLaXQ6IHUuaW5kZXhPZignQXBwbGVXZWJLaXQnKSA+IC0xLAogICAgICAgIC8vIOeBq+eLkOWGheaguAogICAgICAgIGdlY2tvOiB1LmluZGV4T2YoJ0dlY2tvJykgPiAtMSAmJiB1LmluZGV4T2YoJ0tIVE1MJykgPT0gLTEsCiAgICAgICAgLy8g6Iu55p6c6buY6K6k5rWP6KeI5ZmoCiAgICAgICAgc2FmYXJpOiB1LmluZGV4T2YoJ1NhZmFyaScpID09PSAtMQogICAgICB9CiAgICB9OwogIH0oKTsKfSkoKTsKCihmdW5jdGlvbiAoKSB7CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIOa3u+WKoOWvueixoeWxnuaApwogICAqIEBwYXJhbSB7T2JqZWN0fSBvYmog5a+56LGhCiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IOafpeivouadoeS7tgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSDmt7vliqDlgLwKICAgKiBAcmV0dXJuIHtPYmplY3R9IOi/lOWbnua3u+WKoOeahOWxgOmDqOWvueixoQogICAqLwogIGZ1bmN0aW9uIGFkZChvYmosIHF1ZXJ5LCB2YWx1ZSkgewogICAgaWYgKHF1ZXJ5KSB7CiAgICAgIHZhciBvaiA9IGdldChvYmosIHF1ZXJ5KTsKCiAgICAgIGlmIChvaikgewogICAgICAgICQucHVzaChvaiwgdmFsdWUsIHRydWUpOwogICAgICB9CgogICAgICByZXR1cm4gb2o7CiAgICB9IGVsc2UgewogICAgICAkLnB1c2gob2JqLCB2YWx1ZSwgdHJ1ZSk7CiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgfQoKICA7CiAgJC5hZGQgPSBhZGQ7CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIOWIoOmZpOWvueixoeWxnuaApwogICAqIEBwYXJhbSB7T2JqZWN0fSBvYmog5a+56LGhCiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IOafpeivouadoeS7tgogICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIOafpeivouadoeS7tgogICAqIEByZXR1cm4ge09iamVjdH0g6L+U5Zue5Yig6Zmk57uT5p6cCiAgICovCgogIGZ1bmN0aW9uIGRlbChvYmosIHF1ZXJ5LCBpdGVtKSB7CiAgICB2YXIgbyA9IHt9OwoKICAgIGlmIChxdWVyeSkgewogICAgICBvID0gZ2V0KG9iaiwgcXVlcnkpOwogICAgfSBlbHNlIHsKICAgICAgbyA9IG9iajsKICAgIH0KCiAgICBpZiAoIWl0ZW0pIHsKICAgICAgaXRlbSA9IE9iamVjdC5hc3NpZ24obyk7CiAgICB9CgogICAgaWYgKEFycmF5LmlzQXJyYXkobykpIHsKICAgICAgby5jbGVhcigpOwogICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB2YWwgPSBpdGVtW2ldOwoKICAgICAgICBpZiAoX3R5cGVvZih2YWwpID09PSAib2JqZWN0IikgewogICAgICAgICAgZGVsKG8sIG51bGwsIHZhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBvW3ZhbF07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKF90eXBlb2YoaXRlbSkgPT09ICJvYmplY3QiKSB7CiAgICAgIGZvciAodmFyIGsgaW4gaXRlbSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ba10pKSB7CiAgICAgICAgICBkZWxldGUgb1trXTsKICAgICAgICB9IGVsc2UgaWYgKF90eXBlb2Yob1trXSkgPT09ICJvYmplY3QiKSB7CiAgICAgICAgICB2YXIgdHlwZSA9IF90eXBlb2YoaXRlbVtrXSk7CgogICAgICAgICAgaWYgKHR5cGUgPT09ICJvYmplY3QiKSB7CiAgICAgICAgICAgIGRlbChvW2tdLCBudWxsLCBpdGVtW2tdKTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gInN0cmluZyIgfHwgdHlwZSA9PT0gIm51bWJlciIpIHsKICAgICAgICAgICAgZGVsZXRlIG9ba11baXRlbVtrXV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkZWxldGUgb1trXTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIG9ba107CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBkZWxldGUgb1tpdGVtXTsKICAgIH0KCiAgICBmb3IgKHZhciBrIGluIG8pIHsKICAgICAgaWYgKE9iamVjdC5rZXlzKG9ba10pLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGRlbGV0ZSBvW2tdOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG87CiAgfQoKICA7CiAgJC5kZWwgPSBkZWw7CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIOS/ruaUueWvueixoeWxnuaApwogICAqIEBwYXJhbSB7T2JqZWN0fSBvYmog5a+56LGhCiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5IOafpeivouadoeS7tgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSDov5Tlm57kv67mlLnnmoTlsYDpg6jlr7nosaEKICAgKi8KCiAgZnVuY3Rpb24gc2V0KG9iaiwgcXVlcnksIHZhbHVlKSB7CiAgICBpZiAocXVlcnkpIHsKICAgICAgdmFyIG9qID0gZ2V0KG9iaiwgcXVlcnkpOwoKICAgICAgaWYgKG9qKSB7CiAgICAgICAgJC5wdXNoKG9qLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvajsKICAgIH0gZWxzZSB7CiAgICAgICQucHVzaChvYmosIHZhbHVlKTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9CgogIDsKICAkLnNldCA9IHNldDsKCiAgZnVuY3Rpb24gYXJyVG9PYmooYXJyKSB7CiAgICB2YXIgb2JqID0ge307CiAgICB2YXIgcmV0ID0gb2JqOwogICAgdmFyIGxlbiA9IGFyci5sZW5ndGg7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICB2YXIgayA9IGFycltpXTsKCiAgICAgIGlmIChfdHlwZW9mKGspID09ICJvYmplY3QiKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaykpIHsKICAgICAgICAgICQucHVzaChvYmosIGFyclRvT2JqKGspLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJC5wdXNoKG9iaiwgaywgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCFvYmpba10pIHsKICAgICAgICBpZiAobGVuIC0gaSA+IDEpIHsKICAgICAgICAgIG9ialtrXSA9IHt9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvYmpba10gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgb2JqID0gb2JqW2tdOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJldDsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIOafpeivouWvueixoeWxnuaApwogICAqIEBwYXJhbSB7T2JqZWN0fSBvYmog5a+56LGhCiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5CiAgICogQHJldHVybiB7T2JqZWN0fSDov5Tlm57mn6Xor6Lnu5PmnpwKICAgKi8KCgogIGZ1bmN0aW9uIGdldChvYmosIHF1ZXJ5KSB7CiAgICB2YXIgcmV0OwoKICAgIGlmIChfdHlwZW9mKG9iaikgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KG9iaikpIHsKICAgICAgLy8g5Y+q5pyJ6Z2e5pWw57uE55qE5a+56LGh5omN6L+b6KGM5pON5L2cCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHF1ZXJ5KSkgewogICAgICAgIHZhciByZXQgPSBvYmo7IC8vIOWmguaenOaYr+aVsOWtl+WImeW+queOr+aVsOe7hAoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgbyA9IHF1ZXJ5W2ldOwoKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG8pKSB7CiAgICAgICAgICAgIHJldCA9IGdldChyZXQsIG8pOwogICAgICAgICAgfSBlbHNlIGlmIChfdHlwZW9mKG8pID09PSAnb2JqZWN0JykgewogICAgICAgICAgICB2YXIgb2ogPSB7fTsKCiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gbykgewogICAgICAgICAgICAgIGlmIChvW2tdKSB7CiAgICAgICAgICAgICAgICBvaltrXSA9IGdldChyZXRba10sIG9ba10pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBvaltrXSA9IHJldFtrXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldCA9IG9qOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0ID0gcmV0W29dOwoKICAgICAgICAgICAgaWYgKF90eXBlb2YocmV0KSAhPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChfdHlwZW9mKHF1ZXJ5KSA9PT0gJ29iamVjdCcpIHsKICAgICAgICB2YXIgcmV0ID0ge307IC8vIOWmguaenOaYr+WvueixoeWImemBjeWOhuWvueixoQoKICAgICAgICBmb3IgKHZhciBrIGluIHF1ZXJ5KSB7CiAgICAgICAgICByZXRba10gPSBnZXQob2JqW2tdLCBxdWVyeVtrXSk7CiAgICAgICAgfQoKICAgICAgICByZXQgPSByZXQ7CiAgICAgIH0gZWxzZSBpZiAocXVlcnkpIHsKICAgICAgICBpZiAodHlwZW9mIHF1ZXJ5ID09ICJzdHJpbmciIHx8IHR5cGVvZiBxdWVyeSA9PSAibnVtYmVyIikgewogICAgICAgICAgcmV0ID0ge307CiAgICAgICAgICByZXRbcXVlcnldID0gb2JqW3F1ZXJ5XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0ID0gb2JqOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlpoLmnpxxdWVyeeS4uuepuuWImei/lOWbnuaVtOS4quWvueixoQogICAgICAgIHJldCA9IG51bGw7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIOWQpuWImeebtOaOpei/lOWbnuWAvAogICAgICByZXQgPSBvYmo7CiAgICB9CgogICAgcmV0dXJuIHJldDsKICB9CgogIDsKICAkLmdldCA9IGdldDsKICAvKioKICAgKiDpgY3ljobor7vlhpnlr7nosaEKICAgKiBAcGFyYW0ge09iamVjdH0gb2JqCiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSDplK4g5aSa57qn5a+56LGh55SoLuWIhumalAogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSDlgLzvvIzlpoLmnpzkuI3kvKDkuLrmn6Xor6LvvIzkvKDkuLrkv67mlLkKICAgKi8KCiAgZnVuY3Rpb24gb2JqX2ZvcihvYmosIGtleSwgdmFsdWUpIHsKICAgIGlmICgha2V5KSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoJy4nKTsKICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDsKCiAgICBpZiAobGVuID09IDApIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICB2YXIgayA9IGtleXNbMF07CiAgICB2YXIgbyA9IG9ialtrXTsKCiAgICBpZiAobGVuID09IDEgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICBvYmpba10gPSB2YWx1ZTsKICAgICAgbyA9IHZhbHVlOwogICAgfSBlbHNlIGlmIChfdHlwZW9mKG8pID09ICdvYmplY3QnKSB7CiAgICAgIGlmIChsZW4gPiAxKSB7CiAgICAgICAgcmV0dXJuIG9ial9mb3Iobywga2V5cy5zcGxpY2UoMSwgbGVuKS5qb2luKCcuJyksIHZhbHVlKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChsZW4gPiAxKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIG87CiAgfQoKICAkLm9iaiA9IG9ial9mb3I7Cn0pKCk7Ci8qKgogKiDot6jnq5nmoKHpqowKICovCgoKZnVuY3Rpb24gaWZhbWVfY2hlY2soKSB7CiAgdmFyIGRvbWFpbiA9IGRvY3VtZW50LmRvbWFpbjsKCiAgdmFyIF9zZWxmID0gT2JqZWN0LmFzc2lnbih7fSwgd2luZG93LnNlbGYubG9jYXRpb24pOwoKICB0cnkgewogICAgdmFyIGhvc3QgPSB3aW5kb3cudG9wLmxvY2F0aW9uLmhvc3Q7CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5sb2coJ+i3qOWfn+W1jOWll2lmYW1lJyk7CiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvNDA0Lmh0bWwiOwogIH0KfQoKaWZhbWVfY2hlY2soKTs="},{"version":3,"sources":["/Users/tom/Desktop/CS763460_20220314091634/client_admin/src/plugins/jquery_expand.js"],"names":["sleep","milliSeconds","obj","key","endTime","Date","getTime","func","as","query","all","bl","type","constructor","Array","lh","length","i","Object","getOwnPropertyNames","k","speeds","times","t1","valueOf","t2","s","console","log","push","objA","objB","value","undefined","p","n","Number","NaN","Boolean","toString","clear","addList","val","name","toJson","format","JSON","stringify","toUrl","url","queryStr","encodeURI","endWith","replace","indexOf","copy","has","newObj","attr","o","keys","file","text","delete_prop","includeZero","assign","v","funcs","pool","task","api","scope","dict","session_id","user_id","token","lang","now","chinese","english","delete","$","window","hexcase","b64pad","chrsz","md5_vm_test","hex_md5","core_md5","x","len","a","b","c","d","olda","oldb","oldc","oldd","md5_ff","md5_gg","md5_hh","md5_ii","safe_add","md5_cmn","q","t","bit_rol","core_hmac_md5","data","bkey","str2binl","ipad","opad","hash","concat","y","lsw","msw","num","cnt","str","bin","mask","charCodeAt","binl2str","String","fromCharCode","binl2hex","binarray","hex_tab","charAt","binl2b64","tab","triplet","j","b64_md5","str_md5","hex_hmac_md5","b64_hmac_md5","str_hmac_md5","md5","Timer","list","core","prototype","run","start","_this","setInterval","end","clearInterval","add","del","timer","http","get","fun","headers","json","hp","async","success","status","error","complete","XHR","TS","ajax","post","param","contentType","pm","dataType","upload","form","FormData","append","processData","cookies","domain","_domain","set","minutes","time","setTime","document","cookie","encodeURIComponent","toGMTString","arr","split","ar","decodeURIComponent","formData","xhrFields","withCredentials","html","tag","prop","getElementsByTagName","getAttribute","cache","sessionStorage","setItem","getItem","removeItem","db","longTime","expires","localStorage","parse","e","ws","CreateWebSocket","WebSocket","MozWebSocket","connect","try_connect","onmessage","event","message","onclose","reconnect","onerror","noticy","onopen","arr_message","readyState","send","try_times","try_max_times","setTimeout","seconds","WS","receive","content","u","open","close","bodyStr","socket","route","redirect_url","history","end_url","title","pushState","os","navigator","userAgent","version","appVersion","isApp","device","mobile","test","ios","android","iPhone","iPad","pc","app","wechat","weibo","qq","browser","trident","presto","webKit","gecko","safari","oj","item","isArray","arrToObj","ret","obj_for","splice","join","ifame_check","_self","self","location","host","top","href"],"mappings":"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","sourcesContent":["/**\n * @fileOverview JavaScript拓展函数\n * @author xxx\n * @version 1.2\n */\n\n/* == 基础函数 == */\n/**\n * @description 延迟执行（休眠）\n * @param {Number} milliSeconds 毫秒\n * @param {Object} obj 判断对象或函数\n * @param {String} key 判断的对象属性, 为存在的情况下提成退出循环\n * @example var obj = {ok: false}; sleep(2000, obj, 'ok');\n * @example sleep(2000);\n */\nfunction sleep(milliSeconds, obj, key) {\n  var endTime = new Date().getTime() + milliSeconds;\n  if (obj) {\n    if (key) {\n      while (new Date().getTime() < endTime) {\n        if (obj[key]) {\n          continue;\n        }\n      }\n    } else {\n      var func = obj;\n      while (new Date().getTime() < endTime) {\n        if (!func()) {\n          continue;\n        }\n      }\n    }\n  } else {\n    while (new Date().getTime() < endTime) {}\n  }\n}\n\n/**\n * @description 判断对象是否相似\n * @param {Object} obj 被判断对象\n * @param {Object} query 用作判断的对象\n * @param {Boolean} all 是否完全相同\n * @return {Boolean} 相似返回true，否则返回false\n */\nfunction as(obj, query, all) {\n  if (obj) {\n    var bl = true;\n    var type = typeof(obj);\n    if (type !== typeof(query)) {\n      // 如果类型不一致 则两个无相似\n      bl = false;\n    } else if (type === 'string' || type === 'bool' || type === 'number') {\n      bl = obj === query;\n    } else if (obj.constructor == Array) {\n      // 如果都是数组\n      var lh = obj.length;\n      if (all && lh !== query.length) {\n        // 要求完全一致 而长度不一致 说明不相似\n        bl = false;\n      } else {\n        // 否则判断数组里的每个成员是否相似\n        for (var i = 0; i < lh; i++) {\n          if (!as(obj[i], query[i])) {\n            bl = false;\n            break;\n          }\n        }\n      }\n    } else {\n      // 如果类型为对象\n      if (all && Object.getOwnPropertyNames(obj).length !== Object.getOwnPropertyNames(query).length) {\n        // 如果要求完全一致, 而属性长度不一致，则不相似\n        bl = false;\n      } else {\n        // 否则都为对象则判断其值是否一致\n        for (var k in query) {\n          if (!as(obj[k], query[k], all)) {\n            bl = false;\n            break;\n          }\n        }\n      }\n    }\n    return bl;\n  } else {\n    return false;\n  }\n}\n\n/**\n * @description 测试函数执行速度\n * @param {Function()} func 测试的函数\n * @param {Number} times = [value] 测试次数\n */\nfunction speeds(func, times) {\n  if (!times) {\n    times = 1000000;\n  }\n  var t1 = (new Date()).valueOf();\n  for (var i = 0; i < times; i++) {\n    func();\n  }\n  var t2 = (new Date()).valueOf();\n  var s = t2 - t1;\n  console.log('耗时' + s + '毫秒, 平均' + (s / times) + 'ms/次');\n}\n\n\n/**\n * @description 添加对象属性\n * @param {Object} objA 被添加的对象\n * @param {Object} objB 用作添加的对象\n * @param {Boolean} bl 是否补充没有的对象\n * @return {Object} 新对象\n */\nfunction push(objA, objB, bl) {\n  if (!objA || !objB) {\n    return;\n  }\n  if (bl) {\n    for (var k in objB) {\n      var value = objB[k];\n      if (objA[k] === undefined || objA[k] === null || value === null) {\n        objA[k] = value;\n      } else {\n        var type = typeof(objA[k]);\n        var p = typeof(value);\n        if (type !== p) {\n          if (type === \"number\") {\n            var n = Number(value);\n            if (n === NaN) {\n              n = 0;\n            }\n            objA[k] = n;\n          } else if (type === \"boolean\") {\n            if (value === '0' || value === 'false' || value === 'False') {\n              objA[k] = false;\n            } else {\n              objA[k] = Boolean(value);\n            }\n          } else if (type === \"string\") {\n            objA[k] = value.toString();\n          } else {\n            objA[k] = value;\n          }\n        } else if (type === \"object\") {\n          if (objA[k].constructor == Array && value.constructor == Array) {\n            objA[k].clear();\n            objA[k].addList(value);\n          } else {\n            push(objA[k], value, bl);\n          }\n        } else {\n          objA[k] = value;\n        }\n      }\n    }\n  } else {\n    for (var k in objA) {\n      var value = objB[k];\n      if (value !== undefined && objA[k] !== null && value !== null) {\n        var type = typeof(objA[k]);\n        var p = typeof(value);\n        if (type !== p) {\n          if (type === \"number\") {\n            var n = Number(value);\n            if (n === NaN) {\n              n = 0;\n            }\n            objA[k] = n;\n          } else if (type === \"boolean\") {\n            if (value === '0' || value === 'false' || value === 'False') {\n              objA[k] = false;\n            } else {\n              objA[k] = Boolean(value);\n            }\n          } else if (type === \"string\") {\n            objA[k] = value.toString();\n          } else {\n            objA[k] = value;\n          }\n        } else if (type === \"object\") {\n          if (objA[k].constructor == Array && value.constructor == Array) {\n            objA[k].clear();\n            objA[k].addList(value);\n          } else {\n            push(objA[k], value, bl);\n          }\n        } else {\n          objA[k] = value;\n        }\n      }\n    }\n  }\n  return objA;\n}\n\n/**\n * @description 清空对象值\n * @param {Object} obj 对象\n * @return {Object} 返回对象自身\n */\nfunction clear(obj) {\n  if (obj) {\n    for (var k in obj) {\n      var val = obj[k];\n      if (val) {\n        var name = typeof val === 'undefined' ? 'undefined' : typeof(val);\n        switch (name) {\n          case \"string\":\n            obj[k] = \"\";\n            break;\n          case \"number\":\n            obj[k] = 0;\n            break;\n          case \"array\":\n            obj[k].clear();\n            break;\n          case \"object\":\n            clear(obj[k]);\n            break;\n          case \"function\":\n            break;\n          case \"symbol\":\n            obj[k] = \"\";\n            break;\n        }\n      }\n    }\n  }\n  return obj;\n}\n\n/**\n * @description 转为json字符串\n * @param {Object} obj 被转换的对象\n * @param {Boolean} format 是否格式化\n * @return {String} json格式字符串\n */\nfunction toJson(obj, format) {\n  if (format) {\n    return JSON.stringify(obj, null, 4);\n  } else {\n    return JSON.stringify(obj);\n  }\n}\n\n/**\n * @description 转url字符串\n * @param {Object} obj 被转换的对象\n * @param {String} url 请求地址\n * @return {String} url参数格式字符串\n */\nfunction toUrl(obj, url) {\n  var queryStr = \"\";\n  for (var key in obj) {\n    var value = obj[key];\n    if (typeof(value) === 'number') {\n      if (value > 0) {\n        queryStr += \"&\" + key + \"=\" + obj[key];\n      }\n    } else if (value) {\n      queryStr += \"&\" + key + \"=\" + encodeURI(value);\n    }\n  }\n  if (url) {\n    if (url.endWith('?') || url.endWith('&')) {\n      return url + queryStr.replace('&', '');\n    } else if (url.indexOf('?') === -1) {\n      return url + queryStr.replace('&', '?');\n    } else {\n      return url + queryStr;\n    }\n  } else {\n    return queryStr.replace('&', '');\n  }\n};\n\n/**\n * @description 拷贝对象\n * @param {Object} obj 被拷贝的对象\n * @param {Boolean} has 是否非空拷贝，如果含有数据才拷贝，不含数据不拷贝\n * @return {Object} 新对象\n */\nfunction copy(obj, has) {\n  var newObj = {};\n  if (has) {\n    for (var attr in obj) {\n      var o = obj[attr];\n      if (o) {\n        newObj[attr] = o;\n      }\n    }\n  } else {\n    for (var attr in obj) {\n      newObj[attr] = obj[attr];\n    }\n  }\n  return newObj;\n};\n\n/**\n * @description 查看所有属性\n * @param {Object} obj 查看的对象\n * @param {String} file 保存位置\n */\nfunction keys(obj, file) {\n  var text = \"\";\n  for (var k in obj) {\n    text += k + '\\r\\n'\n  }\n  console.log(text);\n}\n\n/**\n * @description 删除对象空属性\n * @param {Object} obj 对象\n * @param {Object} includeZero 是否包括0\n * @return {Object} 返回新对象\n */\nfunction delete_prop(obj, includeZero) {\n  var o = Object.assign({}, obj);\n  if (includeZero) {\n    for (var k in o) {\n      var v = o[k];\n      if (!v) {\n        delete o[k];\n      }\n    }\n  } else {\n    for (var k in o) {\n      var v = o[k];\n      if (v === '' || v === null || v === undefined) {\n        delete o[k];\n      }\n    }\n  }\n  return o;\n}\n\n\n\n/**\n * @namespace\n * @property {Object} pool 数据连接池, 用于存储有关数据库的操作类\n * @property {Object} task 任务池, 用于存储定时任务操作类\n * @property {Object} api API接口，用于存储有关接口的操作类\n * @property {Object} val 全局变量，用于存储全局的配置\n * @property {Object} dict 字典，用于查询变量替换名\n * @property {Object} lang 语言包, 用于全局的语言替换\n * @property {String} sleep 延迟(休眠)\n * @property {Function()} speed 测试执行速度函数\n * @property {Function(Object, Object, Boolean):Boolean} as 判断对象是否相似\n * @property {Function(Object, Object):Boolean} push 为对象添加属性\n * @property {Function(Object):String} toJson 对象转json字符串\n * @property {Function(Object):String} toUrl 对象转url字符串\n * @property {Function(Object):Object} copy 复制一个新对象\n * @property {Function(Object):String} keys 查询获取对象属性键\n */\nvar funcs = {\n  // 数据连接池, 用于存储有关数据库的操作类\n  pool: {},\n  // 任务池, 用于存储定时任务操作类\n  task: {},\n  // API接口，用于存储有关接口的操作类\n  api: {},\n  // 全局变量，用于存储全局的配置\n  val: {\n    // 默认作用域, sys表示系统\n    scope: \"sys\"\n  },\n  /**\n   * @description 字典，用于查询变量替换名\n   * @property {String} session_id session的ID\n   * @property {String} user_id 用户的ID，用于数据库时查询用户唯一标识\n   */\n  dict: {\n    session_id: \"mm:uuid\",\n    user_id: \"user_id\",\n    token: \"x-auth-token\"\n  },\n  /**\n   * @description 语言包, 用于全局的语言替换\n   * @property {String} now = [chinese|english] 当前语言\n   * @property {Object} chinese 中文语言包\n   * @property {Object} english 英文语言包\n   */\n  lang: {\n    now: \"chinese\",\n    chinese: {},\n    english: {}\n  },\n  // 延迟\n  sleep: sleep,\n  // 测试执行速度函数\n  speeds: speeds,\n  // 判断对象是否相似\n  as: as,\n  // 添加对象\n  push: push,\n  // 清空对象值\n  clear: clear,\n  // 对象转json字符串\n  toJson: toJson,\n  // 对象转url字符串\n  toUrl: toUrl,\n  // 复制一个新对象\n  copy: copy,\n  // 查询获取对象属性键\n  keys: keys,\n  // 删除对象属性\n  delete: delete_prop\n};\nif (typeof($) === \"undefined\") {\n  window.$ = funcs\n} else {\n  push($, funcs, true);\n}\n\n\n/* MD5加密类 */\n(function() {\n\t/* md5加密（开始） */\n\tvar hexcase = 0;\n\t/* hex output format. 0 - lowercase; 1 - uppercase  */\n\tvar b64pad = \"\";\n\t/* base-64 pad character. \"=\" for strict RFC compliance */\n\tvar chrsz = 8;\n\t/* bits per input character. 8 - ASCII; 16 - Unicode  */\n\n\t/*\n\t * Perform a simple self-test to see if the VM is working\n\t */\n\tfunction md5_vm_test() {\n\t\treturn hex_md5(\"abc\") == \"900150983cd24fb0d6963f7d28e17f72\";\n\t}\n\t/*\n\t * Calculate the MD5 of an array of little-endian words, and a bit length\n\t */\n\tfunction core_md5(x, len) {\n\t\t/* append padding */\n\t\tx[len >> 5] |= 0x80 << len % 32;\n\t\tx[(len + 64 >>> 9 << 4) + 14] = len;\n\t\tvar a = 1732584193;\n\t\tvar b = -271733879;\n\t\tvar c = -1732584194;\n\t\tvar d = 271733878;\n\t\tfor (var i = 0; i < x.length; i += 16) {\n\t\t\tvar olda = a;\n\t\t\tvar oldb = b;\n\t\t\tvar oldc = c;\n\t\t\tvar oldd = d;\n\t\t\ta = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);\n\t\t\td = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\n\t\t\tc = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\n\t\t\tb = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\n\t\t\ta = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\n\t\t\td = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\n\t\t\tc = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\n\t\t\tb = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\n\t\t\ta = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\n\t\t\td = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\n\t\t\tc = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\n\t\t\tb = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\n\t\t\ta = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\n\t\t\td = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\n\t\t\tc = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\n\t\t\tb = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\t\t\ta = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\n\t\t\td = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\n\t\t\tc = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\n\t\t\tb = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);\n\t\t\ta = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\n\t\t\td = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\n\t\t\tc = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\n\t\t\tb = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\n\t\t\ta = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\n\t\t\td = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\n\t\t\tc = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\n\t\t\tb = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\n\t\t\ta = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\n\t\t\td = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\n\t\t\tc = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\n\t\t\tb = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\t\t\ta = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\n\t\t\td = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\n\t\t\tc = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\n\t\t\tb = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\n\t\t\ta = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\n\t\t\td = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\n\t\t\tc = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\n\t\t\tb = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\n\t\t\ta = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\n\t\t\td = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);\n\t\t\tc = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\n\t\t\tb = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\n\t\t\ta = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\n\t\t\td = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\n\t\t\tc = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\n\t\t\tb = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\n\t\t\ta = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);\n\t\t\td = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\n\t\t\tc = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\n\t\t\tb = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\n\t\t\ta = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\n\t\t\td = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\n\t\t\tc = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\n\t\t\tb = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\n\t\t\ta = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\n\t\t\td = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\n\t\t\tc = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\n\t\t\tb = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\n\t\t\ta = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\n\t\t\td = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\n\t\t\tc = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\n\t\t\tb = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\n\t\t\ta = safe_add(a, olda);\n\t\t\tb = safe_add(b, oldb);\n\t\t\tc = safe_add(c, oldc);\n\t\t\td = safe_add(d, oldd);\n\t\t}\n\t\treturn Array(a, b, c, d);\n\t}\n\t/*\n\t * These functions implement the four basic operations the algorithm uses.\n\t */\n\tfunction md5_cmn(q, a, b, x, s, t) {\n\t\treturn safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\n\t}\n\n\tfunction md5_ff(a, b, c, d, x, s, t) {\n\t\treturn md5_cmn(b & c | ~b & d, a, b, x, s, t);\n\t}\n\n\tfunction md5_gg(a, b, c, d, x, s, t) {\n\t\treturn md5_cmn(b & d | c & ~d, a, b, x, s, t);\n\t}\n\n\tfunction md5_hh(a, b, c, d, x, s, t) {\n\t\treturn md5_cmn(b ^ c ^ d, a, b, x, s, t);\n\t}\n\n\tfunction md5_ii(a, b, c, d, x, s, t) {\n\t\treturn md5_cmn(c ^ (b | ~d), a, b, x, s, t);\n\t}\n\t/*\n\t * Calculate the HMAC-MD5, of a key and some data\n\t */\n\tfunction core_hmac_md5(key, data) {\n\t\tvar bkey = str2binl(key);\n\t\tif (bkey.length > 16) bkey = core_md5(bkey, key.length * chrsz);\n\t\tvar ipad = Array(16),\n\t\t\topad = Array(16);\n\t\tfor (var i = 0; i < 16; i++) {\n\t\t\tipad[i] = bkey[i] ^ 0x36363636;\n\t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C;\n\t\t}\n\t\tvar hash = core_md5(ipad.concat(str2binl(data)), 512 + data.length * chrsz);\n\t\treturn core_md5(opad.concat(hash), 512 + 128);\n\t}\n\t/*\n\t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t * to work around bugs in some JS interpreters.\n\t */\n\tfunction safe_add(x, y) {\n\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t\treturn msw << 16 | lsw & 0xFFFF;\n\t}\n\t/*\n\t * Bitwise rotate a 32-bit number to the left.\n\t */\n\tfunction bit_rol(num, cnt) {\n\t\treturn num << cnt | num >>> 32 - cnt;\n\t}\n\t/*\n\t * Convert a string to an array of little-endian words\n\t * If chrsz is ASCII, characters >255 have their hi-byte silently ignored.\n\t */\n\tfunction str2binl(str) {\n\t\tvar bin = Array();\n\t\tvar mask = (1 << chrsz) - 1;\n\t\tfor (var i = 0; i < str.length * chrsz; i += chrsz) {\n\t\t\tbin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << i % 32;\n\t\t}\n\t\treturn bin;\n\t}\n\t/*\n\t * Convert an array of little-endian words to a string\n\t */\n\tfunction binl2str(bin) {\n\t\tvar str = \"\";\n\t\tvar mask = (1 << chrsz) - 1;\n\t\tfor (var i = 0; i < bin.length * 32; i += chrsz) {\n\t\t\tstr += String.fromCharCode(bin[i >> 5] >>> i % 32 & mask);\n\t\t}\n\t\treturn str;\n\t}\n\t/*\n\t * Convert an array of little-endian words to a hex string.\n\t */\n\tfunction binl2hex(binarray) {\n\t\tvar hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n\t\tvar str = \"\";\n\t\tfor (var i = 0; i < binarray.length * 4; i++) {\n\t\t\tstr += hex_tab.charAt(binarray[i >> 2] >> i % 4 * 8 + 4 & 0xF) + hex_tab.charAt(binarray[i >> 2] >> i % 4 * 8 & 0xF);\n\t\t}\n\t\treturn str;\n\t}\n\t/*\n\t * Convert an array of little-endian words to a base-64 string\n\t */\n\tfunction binl2b64(binarray) {\n\t\tvar tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\t\tvar str = \"\";\n\t\tfor (var i = 0; i < binarray.length * 4; i += 3) {\n\t\t\tvar triplet = (binarray[i >> 2] >> 8 * (i % 4) & 0xFF) << 16 | (binarray[i + 1 >> 2] >> 8 * ((i + 1) % 4) & 0xFF) <<\n\t\t\t\t8 | binarray[i + 2 >> 2] >> 8 * ((i + 2) % 4) & 0xFF;\n\t\t\tfor (var j = 0; j < 4; j++) {\n\t\t\t\tif (i * 8 + j * 6 > binarray.length * 32) str += b64pad;\n\t\t\t\telse str += tab.charAt(triplet >> 6 * (3 - j) & 0x3F);\n\t\t\t}\n\t\t}\n\t\treturn str;\n\t}\n\n\t$.hex_md5 = function hex_md5(s) {\n\t\treturn binl2hex(core_md5(str2binl(s), s.length * chrsz));\n\t};\n\t$.b64_md5 = function b64_md5(s) {\n\t\treturn binl2b64(core_md5(str2binl(s), s.length * chrsz));\n\t};\n\t$.str_md5 = function str_md5(s) {\n\t\treturn binl2str(core_md5(str2binl(s), s.length * chrsz));\n\t};\n\t$.hex_hmac_md5 = function hex_hmac_md5(key, data) {\n\t\treturn binl2hex(core_hmac_md5(key, data));\n\t};\n\t$.b64_hmac_md5 = function b64_hmac_md5(key, data) {\n\t\treturn binl2b64(core_hmac_md5(key, data));\n\t};\n\t$.str_hmac_md5 = function str_hmac_md5(key, data) {\n\t\treturn binl2str(core_hmac_md5(key, data));\n\t};\n\n\t$.md5 = $.hex_md5;\n})();\n\n\n/**\n * 定时任务管理器\n */\n(function() {\n\tfunction Timer() {\n\t\t/**\n\t\t * @description 回调对象集合\n\t\t * @example\n\t\t * [{\n\t\t\t // 名称\n\t\t\t name: \"\",\n\t\t\t // 执行函数\n\t\t\t async run(){}\n\t\t\t}]\n\t\t */\n\t\tvar list = [];\n\n\t\t// 定时器核心\n\t\tthis.core;\n\n\t\t/**\n\t\t * @description 执行\n\t\t */\n\t\tTimer.prototype.run = function() {\n\t\t\tvar len = list.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar run = list[i].run;\n\t\t\t\tif (run) {\n\t\t\t\t\trun();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @description 启动\n\t\t */\n\t\tTimer.prototype.start = function() {\n\t\t\tvar _this = this;\n\t\t\tif (!this.core) {\n\t\t\t\tthis.core = setInterval(this.run, 1000);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @description 结束\n\t\t */\n\t\tTimer.prototype.end = function() {\n\t\t\tclearInterval(this.core);\n\t\t\tthis.core = undefined;\n\t\t};\n\n\t\t/**\n\t\t * @description 添加定时执行任务\n\t\t */\n\t\tTimer.prototype.add = function(obj) {\n\t\t\tif (typeof(obj) === \"object\") {\n\t\t\t\tif (obj.name && obj.run && typeof(obj.run) === 'function') {\n\t\t\t\t\tlist.push(obj);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * @description 删除定时执行任务\n\t\t */\n\t\tTimer.prototype.del = function(name) {\n\t\t\tif (typeof(obj) === \"object\") {\n\t\t\t\tlist.del({\n\t\t\t\t\tname: name\n\t\t\t\t}, true);\n\t\t\t}\n\t\t};\n\t};\n\t$.timer = new Timer();\n})();\n\n(function() {\n\t/* == 网络请求 == */\n\t$.http = {\n\t\t/**\n\t\t * @description GET请求——json\n\t\t * @param {String} url 请求地址\n\t\t * @param {Function} fun 回调函数\n\t\t * @param {Object} headers 协议头\n\t\t * @return {Object} 同步请求返回请求结果，否则返回undefined\n\t\t */\n\t\tget: function get(url, fun, headers) {\n\t\t\tvar json;\n\t\t\tvar hp = {\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: url,\n\t\t\t\tasync: fun !== null,\n\t\t\t\t// xhrFields: {\n\t\t\t\t// \twithCredentials: true\n\t\t\t\t// },\n\t\t\t\t// crossDomain: true,\n\t\t\t\tsuccess: function success(data, status) {\n\t\t\t\t\tif (fun) {\n\t\t\t\t\t\tfun(data, status);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjson = {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tstatus: status\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function error(data, status) {\n\t\t\t\t\tif (fun) {\n\t\t\t\t\t\tfun(data, status);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjson = {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tstatus: status\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function complete(XHR, TS) {\n\t\t\t\t\tXHR = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (headers) {\n\t\t\t\thp.headers = headers;\n\t\t\t}\n\t\t\t$.ajax(hp);\n\t\t\treturn json;\n\t\t},\n\t\t/**\n\t\t * @description POST请求\n\t\t * @param {String} url 请求地址\n\t\t * @param {Object} param 请求参数\n\t\t * @param {Function} fun 回调函数\n\t\t * @param {Object} headers 协议头\n\t\t * @param {String} type 内容类型\n\t\t * @return {Object} 同步请求返回请求结果，否则返回undefined\n\t\t */\n\t\tpost: function post(url, param, fun, headers, type) {\n\t\t\tvar contentType;\n\t\t\tvar pm;\n\t\t\tif (type === 'xml') {\n\t\t\t\tcontentType = \"text/xml; charset=utf-8\";\n\t\t\t\tpm = param;\n\t\t\t} else if (type === 'form') {\n\t\t\t\tcontentType = \"application/x-www-form-urlencoded; charset=utf-8\";\n\t\t\t\tpm = param;\n\t\t\t} else {\n\t\t\t\tcontentType = \"application/json; charset=utf-8\";\n\t\t\t\tpm = JSON.stringify(param);\n\t\t\t}\n\t\t\tvar json;\n\t\t\tvar hp = {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: url,\n\t\t\t\tasync: fun !== null,\n\t\t\t\t// xhrFields: {\n\t\t\t\t// \twithCredentials: true\n\t\t\t\t// },\n\t\t\t\t// crossDomain: true,\n\t\t\t\tdata: pm,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tcontentType: contentType,\n\t\t\t\tsuccess: function success(data, status) {\n\t\t\t\t\tif (fun) {\n\t\t\t\t\t\tfun(data, status);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjson = {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tstatus: status\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function error(data, status) {\n\t\t\t\t\tif (fun) {\n\t\t\t\t\t\tfun(data, status);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjson = {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tstatus: status\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function complete(XHR, TS) {\n\t\t\t\t\tXHR = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (headers) {\n\t\t\t\thp.headers = headers;\n\t\t\t}\n\t\t\t$.ajax(hp);\n\t\t\treturn json;\n\t\t},\n\t\t/**\n\t\t * @description 上传文件\n\t\t * @param {String} url 请求地址\n\t\t * @param {Object} file input file文件\n\t\t * @param {Function} fun 回调函数\n\t\t * @param {Object} headers 协议头\n\t\t * @return {Object} 同步请求返回请求结果，否则返回undefined\n\t\t */\n\t\tupload: function upload(url, file, fun, headers) {\n\t\t\tvar form = new FormData();\n\t\t\tform.append(\"file\", file);\n\t\t\tvar json;\n\t\t\tvar hp = {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: url,\n\t\t\t\tasync: fun !== null,\n\t\t\t\tdata: form,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\tsuccess: function success(data, status) {\n\t\t\t\t\tif (fun) {\n\t\t\t\t\t\tfun(data, status);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjson = {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tstatus: status\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function error(data, status) {\n\t\t\t\t\tif (fun) {\n\t\t\t\t\t\tfun(data, status);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjson = {\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tstatus: status\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function complete(XHR, TS) {\n\t\t\t\t\tXHR = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (headers) {\n\t\t\t\thp.headers = headers;\n\t\t\t}\n\t\t\t$.ajax(hp);\n\t\t\treturn json;\n\t\t}\n\t};\n\n\t/* 缓存 */\n\t$.cookies = {\n\t\t/**\n\t\t * @description 设置域\n\t\t * @param {String} url 地址\n\t\t */\n\t\tdomain: function domain(url) {\n\t\t\tif (url) {\n\t\t\t\t_domain = url;\n\t\t\t}\n\t\t\treturn \";path=/\";\n\t\t},\n\t\t/**\n\t\t * @description 设置缓存\n\t\t * @param {String} name 缓存对象\n\t\t * @param {Object} value 缓存值\n\t\t * @param {Number} minutes 缓存时长，单位: 分钟\n\t\t * @param {String} domain 作用域\n\t\t */\n\t\tset: function set(name, value, minutes, domain) {\n\t\t\tif (!domain) {\n\t\t\t\tdomain = $.cookies.domain();\n\t\t\t}\n\t\t\tvar time = new Date();\n\t\t\tif (minutes) {\n\t\t\t\ttime.setTime(time.getTime() + minutes * 60000);\n\t\t\t\tdocument.cookie = name + \"=\" + encodeURIComponent(value) + \";expires=\" + time.toGMTString();\n\t\t\t} else {\n\t\t\t\ttime.setTime(time.getTime() + 7 * 24 * 3600 * 60000);\n\t\t\t\tdocument.cookie = name + \"=\" + encodeURIComponent(value) + \";expires=\" + time.toGMTString();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @description 获取cookie\n\t\t * @param {String} name 名称\n\t\t */\n\t\tget: function get(name) {\n\t\t\tvar value = null;\n\t\t\tvar str = document.cookie;\n\t\t\tvar arr = str.split(\"; \");\n\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\tvar ar = arr[i].split(\"=\");\n\t\t\t\tif (ar[0] == name) {\n\t\t\t\t\tvalue = decodeURIComponent(ar[1]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\n\t\t/**\n\t\t * @description 删除cookie\n\t\t * @param {String} name 名称\n\t\t */\n\t\tdel: function del(name) {\n\t\t\tthis.set(name, \"\", -1);\n\t\t}\n\t};\n\n\t/**\n\t * @description 设置或查询cookie缓存\n\t * @param {String} key 缓存对象名\n\t * @param {Object} value 缓存值\n\t * @param {Number} minutes 缓存时长，单位: 分钟\n\t */\n\t$.cookie = function(key, value, minutes) {\n\t\tif (value != undefined) {\n\t\t\tif (!minutes) {\n\t\t\t\tif (value == null) {\n\t\t\t\t\tminutes = 0;\n\t\t\t\t} else {\n\t\t\t\t\tminutes = 120;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$.cookies.set(key, value, minutes);\n\t\t} else {\n\t\t\treturn $.cookies.get(key);\n\t\t}\n\t};\n\n\t/* === 多媒体 === */\n\t$.file = {\n\t\t/**\n\t\t * @description 上传文件\n\t\t * @param {String} url 提交网址\n\t\t * @param {Object} obj 对象\n\t\t * @param {Function} func 函数\n\t\t * @param {Object} headers 协议头\n\t\t */\n\t\tupload: function upload(url, obj, func, headers) {\n\t\t\tvar formData = new FormData();\n\t\t\tfor (var k in obj) {\n\t\t\t\tformData.append(k, obj[k]);\n\t\t\t}\n\t\t\tvar hp = {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: url,\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false,\n\t\t\t\tasync: func !== null,\n\t\t\t\txhrFields: {\n\t\t\t\t\twithCredentials: true\n\t\t\t\t},\n\t\t\t\tsuccess: function success(json, status) {\n\t\t\t\t\tif (func) {\n\t\t\t\t\t\tif (json) {\n\t\t\t\t\t\t\tjson[\"obj\"] = obj;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfunc(json, status);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function complete(XHR, TS) {\n\t\t\t\t\tXHR = null;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (headers) {\n\t\t\t\thp.headers = headers;\n\t\t\t}\n\t\t\t$.ajax(hp);\n\t\t}\n\t};\n})();\n\n\n/* 通讯 */\n(function() {\n\t$.html = {\n\t\ttag: function(tag, prop, value) {\n\t\t\tvar obj;\n\t\t\tvar list = document.getElementsByTagName(tag);\n\t\t\tvar len = list.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar o = list[i];\n\t\t\t\tif (o && o.getAttribute(prop) && o.getAttribute(prop).has(value)) {\n\t\t\t\t\tobj = o;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\t};\n\n\t/**\n\t * 本地临时缓存,关闭浏览器后小时\n\t */\n\t$.cache = {\n\t\t/**\n\t\t * 设置值\n\t\t * @param {String} key 键\n\t\t * @param {Object} value 值\n\t\t */\n\t\tset: function(key, value) {\n\t\t\twindow.sessionStorage.setItem(key, value);\n\t\t},\n\t\t/**\n\t\t * 获取值\n\t\t * @param {String} key 键\n\t\t * @return {Object} 值\n\t\t */\n\t\tget: function(key) {\n\t\t\treturn window.sessionStorage.getItem(key);\n\t\t},\n\t\t/**\n\t\t * 删除值\n\t\t * @param {Object} key 键\n\t\t */\n\t\tdel: function(key) {\n\t\t\twindow.sessionStorage.removeItem(key);\n\t\t},\n\t\t/**\n\t\t * 清除所有缓存\n\t\t */\n\t\tclear: function() {\n\t\t\twindow.sessionStorage.clear();\n\t\t}\n\t};\n\n\t/**\n\t * 本地数据库存储\n\t */\n\t$.db = {\n\t\t/**\n\t\t * 设置值\n\t\t * @param {String} key 键\n\t\t * @param {Object} value 值\n\t\t * @param {Number} longTime 保存时长（单位:分钟）\n\t\t */\n\t\tset: function(key, value, longTime) {\n\t\t\tvar expires = null;\n\t\t\tif (longTime) {\n\t\t\t\tvar time = Date.now();\n\t\t\t\texpires = time + longTime * 60000;\n\t\t\t}\n\t\t\tvar data = {\n\t\t\t\tvalue,\n\t\t\t\texpires\n\t\t\t};\n\t\t\twindow.localStorage.setItem(key, JSON.stringify(data));\n\t\t},\n\t\t/**\n\t\t * 获取值\n\t\t * @param {String} key 键\n\t\t * @return {Object} 值\n\t\t */\n\t\tget: function(key) {\n\t\t\tvar value;\n\t\t\tvar text = window.localStorage.getItem(key);\n\t\t\tif (text && text.indexOf('{') === 0) {\n\t\t\t\ttry {\n\t\t\t\t\tvar data = JSON.parse(text);\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tif (data.expires) {\n\t\t\t\t\t\t\tvar time = new Date(data.expires);\n\t\t\t\t\t\t\tif (time > Date.now()) {\n\t\t\t\t\t\t\t\tvalue = data.value;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.localStorage.removeItem(key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalue = data.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\tvalue = text;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvalue = text;\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t/**\n\t\t * 删除值\n\t\t * @param {Object} key 键\n\t\t */\n\t\tdel: function(key) {\n\t\t\twindow.localStorage.removeItem(key);\n\t\t}\n\t};\n\n\t/**\n\t * web socket通讯组\n\t */\n\t$.ws = {};\n\n\t/* 封装 WebSocket 实例化的方法  */\n\tvar CreateWebSocket = (function(url) {\n\t\treturn function(url) {\n\t\t\tvar ws;\n\t\t\ttry {\n\t\t\t\tif (window.WebSocket) {\n\t\t\t\t\tws = new WebSocket(url)\n\t\t\t\t} else if (window.MozWebSocket) {\n\t\t\t\t\tws = new MozWebSocket(url)\n\t\t\t\t};\n\t\t\t} catch (e) {\n\t\t\t\t//TODO handle the exception\n\t\t\t}\n\t\t\treturn ws;\n\t\t}\n\t})();\n\n\t/**\n\t * 等待连接成功, 然后发送消息\n\t */\n\tfunction connect(_this) {\n\t\tif (_this.try_connect) {\n\t\t\treturn;\n\t\t}\n\t\t_this.try_connect = true;\n\t\tvar ws = CreateWebSocket(_this.url);\n\t\tws.onmessage = function(event) {\n\t\t\t_this.message(event);\n\t\t};\n\t\tws.onclose = function() {\n\t\t\treconnect(_this);\n\t\t};\n\t\tws.onerror = function(event) {\n\t\t\t_this.noticy(\"error\", event);\n\t\t};\n\t\tws.onopen = function() {\n\t\t\t_this.try_connect = false;\n\t\t\tvar arr = _this.arr_message;\n\t\t\tvar len = arr.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tif (ws.readyState === 1) {\n\t\t\t\t\t_this.ws.send(arr[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 发送成功, 清空消息组\n\t\t\t_this.arr_message.clear();\n\t\t\t// 重置重新连接次数\n\t\t\t_this.try_times = 0;\n\t\t}\n\t\t_this.ws = ws;\n\t};\n\n\t/**\n\t * 重新连接\n\t * @param {Object} _this ws对象\n\t */\n\tfunction reconnect(_this) {\n\t\t_this.try_times++;\n\t\tif (_this.try_times <= _this.try_max_times) {\n\t\t\t_this.try_connect = false;\n\t\t\t// 没连接上会一直重连，设置延迟避免请求过多\n\t\t\tsetTimeout(function() {\n\t\t\t\tconnect(_this)\n\t\t\t}, _this.seconds);\n\t\t\t_this.noticy('reconnect', _this.try_times);\n\t\t} else {\n\t\t\t_this.noticy('error', '服务器连接失败!');\n\t\t}\n\t};\n\n\t/**\n\t * 构造通讯函数\n\t * @param {String} url\n\t * @param {Function} noticy 通知函数\n\t * @param {Function} receive 响应回调函数\n\t * @param {Function} noticy 信息捕捉函数\n\t * @param {String} name 名称\n\t * @param {Number} seconds 重新连接次数\n\t * @return {Object} 返回发信服务\n\t */\n\tfunction WS(url, receive, noticy, name, seconds) {\n\t\tif (noticy) {\n\t\t\tthis.noticy = noticy;\n\t\t} else {\n\t\t\t/**\n\t\t\t * 通知函数\n\t\t\t * @param {String} type 通知类型\n\t\t\t */\n\t\t\tthis.noticy = function(type, content) {\n\t\t\t\tconsole.log(type, content);\n\t\t\t};\n\t\t}\n\n\t\tif (!window.WebSocket) {\n\t\t\tconsole.error('错误: 浏览器不支持websocket');\n\t\t\tthis.noticy('error', '浏览器不支持websocket');\n\t\t\treturn;\n\t\t}\n\n\t\tvar u;\n\t\tif (url.indexOf('//') !== -1) {\n\t\t\tu = url.replace(\"https\", \"ws\").replace(\"http\", \"ws\");\n\t\t} else {\n\t\t\tu = \"ws://\" + url;\n\t\t}\n\t\t// 连接地址\n\t\tthis.url = u;\n\n\t\tif (name) {\n\t\t\tthis.name = name\n\t\t} else {\n\t\t\tthis.name = u;\n\t\t}\n\n\t\tthis.receive = receive;\n\n\t\t// 消息数组, 在等待连接的过程中, 如果有多条消息, 则保存至此, 等待连接成功后发送\n\t\tthis.arr_message = [];\n\n\t\tif (seconds) {\n\t\t\tthis.seconds = seconds;\n\t\t} else {\n\t\t\tthis.seconds = 6000;\n\t\t}\n\n\t\t/**\n\t\t * 尝试重连次数\n\t\t */\n\t\tthis.try_times = 0;\n\n\t\t/**\n\t\t * 最大尝试次数, 如果每次重试间隔1分钟, 那么10分钟后就不再重连\n\t\t */\n\t\tthis.try_max_times = 10;\n\n\t\t/**\n\t\t * 是否正在尝试连接\n\t\t */\n\t\tthis.try_connect = false;\n\n\t\t// 连接 socket服务\n\t\tconnect(this);\n\t}\n\n\n\t/**\n\t * 打开服务\n\t */\n\tWS.prototype.open = function() {\n\t\tconnect(this);\n\t};\n\n\t/**\n\t * 关闭服务\n\t */\n\tWS.prototype.close = function() {\n\t\tthis.ws.onclose = function(event) {};\n\t\tthis.ws.close()\n\t};\n\n\n\t/**\n\t * 释放\n\t */\n\tWS.prototype.clear = function() {\n\t\tthis.close();\n\t\tdelete $.ws[key];\n\t};\n\n\t/**\n\t * 收到消息\n\t */\n\tWS.prototype.message = function(event) {\n\t\tvar data = event.data;\n\t\tif (data && this.receive) {\n\t\t\tthis.receive(data);\n\t\t}\n\t};\n\n\n\t/**\n\t * 发送数据\n\t * @param {String} bodyStr 消息主体字符串\n\t */\n\tWS.prototype.send = function(bodyStr) {\n\t\tvar ws = this.ws;\n\t\tswitch (ws.readyState) {\n\t\t\tcase 0:\n\t\t\t\t// CONNECTING 正在连接\n\t\t\t\t// 先将消息加入队列等待连接成功再发送\n\t\t\t\tthis.arr_message.push(bodyStr);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t// OPEN 连接成功，可以通信了\n\t\t\t\tws.send(bodyStr);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t// CLOSING 连接正在关闭\n\t\t\t\t// 先将消息加入队列, 等待关闭 > 重新连接 > 连接成功 再发送消息\n\t\t\t\tthis.arr_message.push(bodyStr);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (this.try_times > 9) {\n\t\t\t\t\tthis.try_times = 0;\n\t\t\t\t\tthis.try_connect = false;\n\t\t\t\t}\n\t\t\t\t// CLOSED 连接已经关闭，或者打开连接失败\n\t\t\t\t// 先将消息加入队列, 重新连接 > 连接成功 再发送消息\n\t\t\t\tthis.arr_message.push(bodyStr);\n\t\t\t\tconnect(this);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * 主动关闭连接\n\t */\n\tWS.prototype.close = function() {\n\t\tthis.ws.close();\n\t};\n\n\t/**\n\t * 创建web socket通讯服务\n\t * @param {String} url URL地址\n\t * @param {Function} receive 响应回调函数\n\t * @param {Function} noticy 信息捕捉函数\n\t * @param {String} name 名称\n\t * @param {String} seconds 秒\n\t * @return {Object} 返回发信服务\n\t */\n\t$.socket = function(url, receive, noticy, name, seconds) {\n\t\t// 使用键方式去查询多个通讯\n\t\t// 需要多通讯的原因是: 像交易所可能需要即时通讯的同时还需要试试变化交易信息\n\t\tif (!name) {\n\t\t\tname = url;\n\t\t}\n\t\tif (!$.ws[name]) {\n\t\t\t$.ws[name] = new WS(url, receive, noticy, name, seconds);\n\t\t} else {\n\t\t\t$.ws[name].try_times = 0;\n\t\t}\n\t\treturn $.ws[name];\n\t};\n\n\t/**\n\t * 路由\n\t */\n\t$.route = {\n\t\t/**\n\t\t * 重定向地址\n\t\t */\n\t\tredirect_url: \"/\",\n\t\t/**\n\t\t * 路由历史记录\n\t\t */\n\t\thistory: {\n\t\t\tlist: [],\n\t\t\tpush: function(url) {\n\t\t\t\tif (this.list.length > 0) {\n\t\t\t\t\tvar end_url = this.list[this.list.length - 1];\n\t\t\t\t\tif (end_url !== url) {\n\t\t\t\t\t\tthis.list.push(url);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.list.push(url);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * 添加路由\n\t\t * @param {String} url\n\t\t * @param {String} title\n\t\t */\n\t\tpush: function(url, title) {\n\t\t\thistory.pushState({\n\t\t\t\tstatus: 0\n\t\t\t}, title, url);\n\t\t}\n\t};\n\n\t/**\n\t * 浏览器\n\t */\n\t$.os = function() {\n\t\tvar u = navigator.userAgent;\n\t\treturn {\n\t\t\tversion: navigator.appVersion,\n\t\t\tisApp: u.indexOf(\"Html5Plus\") !== -1,\n\t\t\tdevice: {\n\t\t\t\t// 是否为移动终端\n\t\t\t\tmobile: /AppleWebKit.*Mobile.*/.test(u),\n\t\t\t\t// ios终端\n\t\t\t\tios: /\\(i[^;]+;( U;)? CPU.+Mac OS X/.test(u),\n\t\t\t\t// android终端或Linux浏览器\n\t\t\t\tandroid: u.indexOf('Android') !== -1 || u.indexOf('Linux') !== -1,\n\t\t\t\t// 是否为iPhone或者QQHD浏览器\n\t\t\t\tiPhone: u.indexOf('iPhone') !== -1,\n\t\t\t\t// 是否iPad\n\t\t\t\tiPad: u.indexOf('iPad') !== -1,\n\t\t\t\t// 是否电脑\n\t\t\t\tpc: u.indexOf('Window') !== -1,\n\t\t\t},\n\t\t\tapp: {\n\t\t\t\t// 微信\n\t\t\t\twechat: /MicroMessenger/i.test(u),\n\t\t\t\t// 微博\n\t\t\t\tweibo: /WeiBo/i.test(u),\n\t\t\t\t// QQ\n\t\t\t\tqq: /QQ/i.test(u)\n\t\t\t},\n\t\t\tbrowser: {\n\t\t\t\t// 浏览器版本信息\n\t\t\t\t// IE内核\n\t\t\t\ttrident: u.indexOf('Trident') > -1,\n\t\t\t\t// opera内核\n\t\t\t\tpresto: u.indexOf('Presto') > -1,\n\t\t\t\t// 苹果、谷歌内核\n\t\t\t\twebKit: u.indexOf('AppleWebKit') > -1,\n\t\t\t\t// 火狐内核\n\t\t\t\tgecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,\n\t\t\t\t// 苹果默认浏览器\n\t\t\t\tsafari: u.indexOf('Safari') === -1\n\t\t\t}\n\t\t}\n\t}();\n})();\n\n\n(function() {\n\t/**\n\t * @description 添加对象属性\n\t * @param {Object} obj 对象\n\t * @param {Object} query 查询条件\n\t * @param {Object} value 添加值\n\t * @return {Object} 返回添加的局部对象\n\t */\n\tfunction add(obj, query, value) {\n\t\tif (query) {\n\t\t\tvar oj = get(obj, query);\n\t\t\tif (oj) {\n\t\t\t\t$.push(oj, value, true);\n\t\t\t}\n\t\t\treturn oj;\n\t\t} else {\n\t\t\t$.push(obj, value, true);\n\t\t\treturn obj;\n\t\t}\n\t};\n\t$.add = add;\n\n\t/**\n\t * @description 删除对象属性\n\t * @param {Object} obj 对象\n\t * @param {Object} query 查询条件\n\t * @param {Object} item 查询条件\n\t * @return {Object} 返回删除结果\n\t */\n\tfunction del(obj, query, item) {\n\t\tvar o = {};\n\t\tif (query) {\n\t\t\to = get(obj, query);\n\t\t} else {\n\t\t\to = obj;\n\t\t}\n\t\tif (!item) {\n\t\t\titem = Object.assign(o);\n\t\t}\n\t\tif (Array.isArray(o)) {\n\t\t\to.clear();\n\t\t} else if (Array.isArray(item)) {\n\t\t\tfor (var i = 0; i < item.length; i++) {\n\t\t\t\tvar val = item[i];\n\t\t\t\tif (typeof(val) === \"object\") {\n\t\t\t\t\tdel(o, null, val);\n\t\t\t\t} else {\n\t\t\t\t\tdelete o[val];\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof(item) === \"object\") {\n\t\t\tfor (var k in item) {\n\t\t\t\tif (Array.isArray(o[k])) {\n\t\t\t\t\tdelete o[k];\n\t\t\t\t} else if (typeof(o[k]) === \"object\") {\n\t\t\t\t\tvar type = typeof(item[k]);\n\t\t\t\t\tif (type === \"object\") {\n\t\t\t\t\t\tdel(o[k], null, item[k]);\n\t\t\t\t\t} else if (type === \"string\" || type === \"number\") {\n\t\t\t\t\t\tdelete o[k][item[k]];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete o[k];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdelete o[k];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdelete o[item];\n\t\t}\n\t\tfor (var k in o) {\n\t\t\tif (Object.keys(o[k]).length === 0) {\n\t\t\t\tdelete o[k]\n\t\t\t}\n\t\t}\n\t\treturn o;\n\t};\n\t$.del = del;\n\n\t/**\n\t * @description 修改对象属性\n\t * @param {Object} obj 对象\n\t * @param {Object} query 查询条件\n\t * @param {Object} value 返回修改的局部对象\n\t */\n\tfunction set(obj, query, value) {\n\t\tif (query) {\n\t\t\tvar oj = get(obj, query);\n\t\t\tif (oj) {\n\t\t\t\t$.push(oj, value);\n\t\t\t}\n\t\t\treturn oj;\n\t\t} else {\n\t\t\t$.push(obj, value);\n\t\t\treturn obj;\n\t\t}\n\t};\n\t$.set = set;\n\n\tfunction arrToObj(arr) {\n\t\tvar obj = {};\n\t\tvar ret = obj;\n\t\tvar len = arr.length;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar k = arr[i];\n\t\t\tif (typeof(k) == \"object\") {\n\t\t\t\tif (Array.isArray(k)) {\n\t\t\t\t\t$.push(obj, arrToObj(k), true);\n\t\t\t\t} else {\n\t\t\t\t\t$.push(obj, k, true);\n\t\t\t\t}\n\t\t\t} else if (!obj[k]) {\n\t\t\t\tif (len - i > 1) {\n\t\t\t\t\tobj[k] = {};\n\t\t\t\t} else {\n\t\t\t\t\tobj[k] = true;\n\t\t\t\t}\n\t\t\t\tobj = obj[k];\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n\n\t/**\n\t * @description 查询对象属性\n\t * @param {Object} obj 对象\n\t * @param {Object} query\n\t * @return {Object} 返回查询结果\n\t */\n\tfunction get(obj, query) {\n\t\tvar ret;\n\t\tif (typeof(obj) === 'object' && !Array.isArray(obj)) {\n\t\t\t// 只有非数组的对象才进行操作\n\t\t\tif (Array.isArray(query)) {\n\t\t\t\tvar ret = obj;\n\t\t\t\t// 如果是数字则循环数组\n\t\t\t\tfor (var i = 0; i < query.length; i++) {\n\t\t\t\t\tvar o = query[i];\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\tret = get(ret, o);\n\t\t\t\t\t} else if (typeof(o) === 'object') {\n\t\t\t\t\t\tvar oj = {};\n\t\t\t\t\t\tfor (var k in o) {\n\t\t\t\t\t\t\tif (o[k]) {\n\t\t\t\t\t\t\t\toj[k] = get(ret[k], o[k]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\toj[k] = ret[k];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tret = oj;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret = ret[o];\n\t\t\t\t\t\tif (typeof(ret) !== 'object') {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else if (typeof(query) === 'object') {\n\t\t\t\tvar ret = {};\n\t\t\t\t// 如果是对象则遍历对象\n\t\t\t\tfor (var k in query) {\n\t\t\t\t\tret[k] = get(obj[k], query[k]);\n\t\t\t\t}\n\t\t\t\tret = ret;\n\t\t\t} else if (query) {\n\t\t\t\tif (typeof(query) == \"string\" || typeof(query) == \"number\") {\n\t\t\t\t\tret = {};\n\t\t\t\t\tret[query] = obj[query];\n\t\t\t\t} else {\n\t\t\t\t\tret = obj;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 如果query为空则返回整个对象\n\t\t\t\tret = null;\n\t\t\t}\n\t\t} else {\n\t\t\t// 否则直接返回值\n\t\t\tret = obj;\n\t\t}\n\t\treturn ret;\n\t};\n\t$.get = get;\n\n\t/**\n\t * 遍历读写对象\n\t * @param {Object} obj\n\t * @param {String} key 键 多级对象用.分隔\n\t * @param {Object} value 值，如果不传为查询，传为修改\n\t */\n\tfunction obj_for(obj, key, value) {\n\t\tif (!key) {\n\t\t\treturn undefined;\n\t\t}\n\t\tvar keys = key.split('.');\n\t\tvar len = keys.length;\n\t\tif (len == 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\tvar k = keys[0];\n\t\tvar o = obj[k];\n\t\tif (len == 1 && value !== undefined) {\n\t\t\tobj[k] = value;\n\t\t\to = value;\n\t\t} else if (typeof(o) == 'object') {\n\t\t\tif (len > 1) {\n\t\t\t\treturn obj_for(o, keys.splice(1, len).join('.'), value);\n\t\t\t}\n\t\t} else if (len > 1) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn o;\n\t}\n\n\t$.obj = obj_for;\n})();\n\n/**\n * 跨站校验\n */\nfunction ifame_check() {\n\tvar domain = document.domain;\n\tvar _self = Object.assign({}, window.self.location);\n\ttry {\n\t\tvar host = window.top.location.host;\n\t} catch (e) {\n\t\tconsole.log('跨域嵌套ifame');\n\t\twindow.location.href = \"/404.html\";\n\t}\n}\n\nifame_check();\n"]}]}